module qcons-test02

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  collection/list/cons
  collection/tuple/cons


strategies
  main =
    s-enter(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "main", "8,2,11,14")
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "9,4,11,14")
    ; (s-step(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "9,4,9,12")
       ; !"aap"(1))
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "10,6,11,14")
    ; (s-step(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "10,6,10,11") ; do-aap)
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "11,6,11,14")
    ; ?"aap"(2)
    < s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "main", "8,2,11,14")
    + s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "main", "8,2,11,14")
      ; fail

  do-aap =
    s-enter(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "do-aap", "13,2,14,22")
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "14,4,14,22")
    ; "aap"(
        s-step(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "14,11,14,20")
        ; \ 1 -> 2 \
      )
    < s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "do-aap", "13,2,14,22")
    + s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/qcons-test02.str", "do-aap", "13,2,14,22")
      ; fail


signature
  constructors
    "aap" : Term -> Term