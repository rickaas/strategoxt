module test46

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib


strategies
  main =
    s-enter(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "main", "5,3,6,20")
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "6,5,6,20")
    ; <(s-step(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "6,6,6,17")
        ; dyn-test(|2))> 3
    < s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "main", "5,3,6,20")
    + s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "main", "5,3,6,20")
      ; fail

  dyn-test(|x) =
    s-enter(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "dyn-test", "8,3,10,30")
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "9,7,10,30")
    ; (s-step(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "9,7,9,8") ; ?y)
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "10,7,10,30")
    ; rules ( DynTest :
                y -> x )
    < s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "dyn-test", "8,3,10,30")
    + s-exit(|"strategoxt/stratego-libraries/strc/tests/test1/test46.str", "dyn-test", "8,3,10,30")
      ; fail