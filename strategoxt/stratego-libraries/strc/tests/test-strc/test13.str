module test13

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib


strategies
  main =
    s-enter(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "main", "6,2,6,15")
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "6,9,6,15")
    ; (s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "6,9,6,10")
       ; !0)
    ; s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "6,13,6,15")
    ; foo
    < s-exit(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "main", "6,2,6,15")
    + s-exit(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "main", "6,2,6,15")
      ; fail

  foo :
    a -> <r-exit(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "foo", "8,2,11,16")> a
    where r-enter(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "foo", "8,2,11,16")
          <+ r-exit(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "foo", "8,2,11,16")
             ; fail
    where s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "9,10,9,16")
          ; say(
              s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "9,14,9,15")
              ; !1
            )
          <+ r-exit(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "foo", "8,2,11,16")
             ; fail
    with s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "10,9,10,12") ; fail
         <+ r-exit(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "foo", "8,2,11,16")
            ; fail
    where s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "11,10,11,16")
          ; say(
              s-step(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "11,14,11,15")
              ; !3
            )
          <+ r-exit(|"strategoxt/stratego-libraries/strc/tests/test-strc/test13.str", "foo", "8,2,11,16")
             ; fail