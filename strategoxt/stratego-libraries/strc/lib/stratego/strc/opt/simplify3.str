module simplify3

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  stratego/strc/opt/stratego-laws
  stratego/strc/opt/opt-lib


strategies
  simplify3 =
    s-enter(
    | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
    , "simplify3"
    , "5"
    , "2"
    , "6"
    , "58"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
      , "6"
      , "4"
      , "6"
      , "58"
      )
    ; apply-to-bodies(
        s-step(
        | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
        , "6"
        , "20"
        , "6"
        , "57"
        )
        ; (s-step(
           | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
           , "6"
           , "20"
           , "6"
           , "27"
           )
           ; simplify)
        ; s-step(
          | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
          , "6"
          , "30"
          , "6"
          , "57"
          )
        ; remove-annotations-from-vars
      )
    < s-exit(
      | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
      , "simplify3"
      , "5"
      , "2"
      , "6"
      , "58"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
      , "simplify3"
      , "5"
      , "2"
      , "6"
      , "58"
      )
      ; fail

  remove-annotations-from-vars =
    s-enter(
    | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
    , "remove-annotations-from-vars"
    , "8"
    , "2"
    , "9"
    , "34"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
      , "9"
      , "4"
      , "9"
      , "34"
      )
    ; alltd(
        s-step(
        | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
        , "9"
        , "10"
        , "9"
        , "32"
        )
        ; \ Var(x){_} -> Var(x) \
      )
    < s-exit(
      | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
      , "remove-annotations-from-vars"
      , "8"
      , "2"
      , "9"
      , "34"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/strc/lib/stratego/strc/opt/simplify3.str"
      , "remove-annotations-from-vars"
      , "8"
      , "2"
      , "9"
      , "34"
      )
      ; fail