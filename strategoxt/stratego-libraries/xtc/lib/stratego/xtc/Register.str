module stratego/xtc/Register

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  stratego/xtc/Repository


strategies
  xtc-find-warning =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-warning", "9,2,10,11")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "10,4,10,11")
    ; xtc-find
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-warning", "9,2,10,11")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-warning", "9,2,10,11")
      ; fail

  xtc-find =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find", "12,2,18,9")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "13,6,18,9")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "13,6,16,50")
       ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "13,6,13,10") ; ?tool)
       ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "14,6,16,50")
       ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "14,6,14,13") ; xtc-load)
       ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "15,6,16,50")
       ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "15,7,15,42")
          ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "15,7,15,26") ; xtc-find-version-loc
             <+ s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "15,31,15,42") ; xtc-find-loc))
       ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "16,6,16,50")
       ; log(
         | Vomit()
         , [ "Found "
           , tool
           , " at "
           , <s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "16,46,16,47") ; id>
           ]
         )
       <+ s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "17,6,18,9")
          ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "17,6,17,64")
             ; log(
               | Error()
               , [ "No XTC registration for "
                 , <s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "17,50,17,51") ; id>
                 , " found"
                 ]
               ))
          ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "18,6,18,9")
          ; fail)
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find", "12,2,18,9")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find", "12,2,18,9")
      ; fail

  xtc-find-silent =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-silent", "20,2,22,43")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "21,6,22,43")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "21,6,21,13") ; xtc-load)
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "22,7,22,42")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "22,7,22,26") ; xtc-find-version-loc
       <+ s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "22,31,22,42") ; xtc-find-loc)
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-silent", "20,2,22,43")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-silent", "20,2,22,43")
      ; fail

  xtc-find-version-loc :
    (tool, version) -> <r-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-version-loc", "24,2,26,63")> loc
    where r-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-version-loc", "24,2,26,63")
          <+ r-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-version-loc", "24,2,26,63")
             ; fail
    where s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "26,10,26,63")
          ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "26,10,26,39")
             ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "26,11,26,19") ; table-get)> (XTC(), Tool(tool)))
          ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "26,42,26,63")
          ; fetch(
              s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "26,48,26,62")
              ; ?(version, loc)
            )
          <+ r-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-version-loc", "24,2,26,63")
             ; fail

  xtc-find-loc :
    tool -> <r-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-loc", "28,2,30,64")> loc
    where r-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-loc", "28,2,30,64")
          <+ r-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-loc", "28,2,30,64")
             ; fail
    where s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "30,10,30,64")
          ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "30,10,30,40")
             ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "30,11,30,19") ; table-get)> (XTC(), Tool(tool))) => [(version, loc)|_]
          <+ r-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-loc", "28,2,30,64")
             ; fail

  xtc-find-path =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-path", "32,2,33,20")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "33,4,33,20")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "33,4,33,11") ; xtc-find)
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "33,14,33,20")
    ; dirname
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-path", "32,2,33,20")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-find-path", "32,2,33,20")
      ; fail

  xtc-register =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register", "37,2,54,11")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "38,6,54,11")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "38,6,38,31")
       ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "38,6,38,22")
          ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "38,7,38,16") ; get-config)> "-t") => tools)
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "39,6,54,11")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "39,6,39,61")
       ; log(
         | Debug()
         , ["Tools : "|<s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "39,35,39,52")
                        ; separate-by(|", ")> tools]
         ))
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "41,6,54,11")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "41,6,41,33")
       ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "41,6,41,22")
          ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "41,7,41,16") ; get-config)> "-V") => version)
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "42,6,54,11")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "42,6,42,43")
       ; log(
         | Debug()
         , ["Version : ", version]
         ))
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "44,6,54,11")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "44,6,52,8")
       ; if s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "44,9,44,29")
            ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "44,10,44,19") ; get-config)> "--path" then
           s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "45,10,47,49")
           ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "45,10,45,38")
              ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "45,10,45,30")
                 ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "45,11,45,20") ; get-config)> "--path") => path)
           ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "46,10,47,49")
           ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "46,10,46,41")
              ; log(
                | Debug()
                , ["Path : ", path]
                ))
           ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "47,10,47,49")
           ; xtc-register-path(|tools, version, path)
         else
           s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "49,10,51,43")
           ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "49,10,49,33")
              ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "49,10,49,26")
                 ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "49,11,49,20") ; get-config)> "-l") => loc)
           ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "50,10,51,43")
           ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "50,10,50,44")
              ; log(
                | Debug()
                , ["Location : ", loc]
                ))
           ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "51,10,51,43")
           ; xtc-register(|tools, version, loc)
         end)
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "54,6,54,11")
    ; !tools
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register", "37,2,54,11")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register", "37,2,54,11")
      ; fail


strategies
  xtc-register(|tools, version, loc) =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register", "63,2,71,4")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "64,4,71,4")
    ; where(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "65,6,70,9")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "65,6,65,11") ; !tools)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "66,8,70,9")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "66,9,66,26")
               ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "66,9,66,15") ; is-list
                  <+ s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "66,20,66,26")
                     ; ![<s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "66,23,66,24") ; id>]))
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "67,8,70,9")
            ; map(
                s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "67,12,70,8")
                ; {tool:
                    s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "68,10,69,77")
                    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "68,10,68,14") ; ?tool)
                    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "69,12,69,77")
                    ; xtc-register-path(
                      | tool
                      , version
                      , <s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "69,47,69,58") ; conc-strings> (loc, "/", tool)
                      )
                  }
              ))
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register", "63,2,71,4")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register", "63,2,71,4")
      ; fail

  xtc-register-path(|tools, version, path) =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register-path", "78,2,86,4")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "79,4,86,4")
    ; where(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "80,6,85,9")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "80,6,80,20")
               ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "80,7,80,13") ; is-list)> tools)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "81,8,85,9")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "81,8,81,13") ; !tools)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "82,8,85,9")
            ; map(
                s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "82,12,85,8")
                ; {tool:
                    s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "83,10,84,50")
                    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "83,10,83,14") ; ?tool)
                    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "84,12,84,50")
                    ; xtc-register-path(|tool, version, path)
                  }
              ))
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register-path", "78,2,86,4")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register-path", "78,2,86,4")
      ; fail

  xtc-register-path(|tool, version, path) =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register-path", "93,2,116,4")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "94,4,116,4")
    ; where(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "95,6,115,47")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "95,6,95,24")
               ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "95,7,95,18")
                   ; not(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "95,11,95,17") ; is-list))> tool)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "96,8,115,47")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "96,8,96,15") ; xtc-load)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "97,8,115,47")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "97,8,97,36")
               ; tbl := <s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "97,16,97,35")
                         ; lookup-table(|XTC())>)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "98,8,115,47")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "98,8,112,10")
               ; if s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "98,11,98,49")
                    ; val := <s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "98,19,98,44")
                              ; hashtable-get(|Tool(tool))> tbl then
                   s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "99,10,109,14")
                   ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "99,10,99,13") ; !val)
                   ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "102,12,109,14")
                   ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "102,12,102,33")
                      ; remove-all(
                          s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "102,23,102,32")
                          ; ?(_, path)
                        ))
                   ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "105,12,109,14")
                   ; if s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "105,15,105,34")
                        ; fetch(
                            s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "105,21,105,33")
                            ; ?(version, _)
                          ) then
                       s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "106,14,106,53")
                       ; fetch(
                           s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "106,20,106,52")
                           ; ( (version, _) -> (version, path) )
                         )
                     else
                       s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "108,14,108,38")
                       ; ![(version, path)|<s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "108,35,108,36") ; id>]
                     end
                 else
                   s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "111,10,111,27")
                   ; ![(version, path)]
                 end)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "114,8,115,47")
            ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "114,8,114,14") ; ?newval)
            ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "115,8,115,47")
            ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "115,9,115,42")
                ; hashtable-put(|Tool(tool), newval))> tbl)
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register-path", "93,2,116,4")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "xtc-register-path", "93,2,116,4")
      ; fail


strategies
  register-import =
    s-enter(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "register-import", "120,2,125,42")
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "121,4,125,42")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "121,4,121,35")
       ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "121,4,121,24")
          ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "121,5,121,14") ; get-config)> "import") => imports)
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "122,6,125,42")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "122,6,122,45")
       ; log(
         | Vomit()
         , "Registering imports"
         , <s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "122,42,122,43") ; id>
         ))
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "123,6,125,42")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "123,6,123,34")
       ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "123,6,123,26")
          ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "123,7,123,16") ; get-config)> "import") => reps)
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "124,6,125,42")
    ; (s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "124,6,124,35")
       ; log(
         | Vomit()
         , "Importing"
         , <s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "124,32,124,33") ; id>
         ))
    ; s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "125,6,125,42")
    ; <(s-step(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "125,7,125,17") ; table-union)> (XTC(), Import(), reps)
    < s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "register-import", "120,2,125,42")
    + s-exit(|"strategoxt/stratego-libraries/xtc/lib/stratego/xtc/Register.str", "register-import", "120,2,125,42")
      ; fail