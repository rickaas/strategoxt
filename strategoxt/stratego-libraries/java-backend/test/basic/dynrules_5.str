module dynrules_5

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib


rules

  main-dynrules_5 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "main-dynrules_5", "8,2,19,45")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "9,5,19,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "9,5,14,5")
       ; rules (
           Foo :+
             Some("2") -> 1
           Foo :+
             None() -> None()
           Foo :+
             ("a", 2) -> 3
           Foo :+
             ("a", 2) -> 4
         ))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "15,5,19,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "15,5,17,5")
       ; rules ( Foo :-
                   None() ))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "18,5,19,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "18,5,18,23")
       ; dr-all-keys(|"Foo"))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "18,26,19,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "18,26,18,61")
       ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "18,26,18,30") ; debug) => [ Some("2")
                                                                                                                     , None()
                                                                                                                     , (a, 2)
                                                                                                                     ])
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "19,5,19,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "19,5,19,18")
       ; map(
           s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "19,9,19,17") ; bagof-Foo
         ))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "19,21,19,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "19,21,19,25") ; debug) => [ [1]
                                                                                                                  , []
                                                                                                                  , [4, 3]
                                                                                                                  ]
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "main-dynrules_5", "8,2,19,45")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/basic/dynrules_5.str", "main-dynrules_5", "8,2,19,45")
      ; fail