module dynamic-rules-test

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib


signature
  constructors
    Var  : String -> Exp
    Int  : Int -> Exp
    Plus : Exp * Exp -> Exp
    Let  : List(Decl) * Exp -> Exp
    Call : String * List(Exp) -> Exp
    Fdec : String * List(String) * Exp -> Decl
    Vdec : String * Exp -> Decl


strategies
  exp-rename =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "exp-rename", "16,2,19,4")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "17,2,19,4")
    ; rec r (
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "17,8,19,3")
        ; {|RenameCall, RenameVar:
             s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,4,18,71")
             ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,4,18,63")
                ; try(
                    s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,8,18,62")
                    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,8,18,24") ; RenameDeclaration
                       + s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,28,18,62")
                         ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,28,18,37") ; RenameArgs
                            + s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,41,18,62")
                              ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,41,18,50") ; RenameCall
                                 + s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,54,18,62") ; RenameVar)))
                  ))
             ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,66,18,71")
             ; all(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "18,70,18,70") ; r)
          |}
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "exp-rename", "16,2,19,4")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "exp-rename", "16,2,19,4")
      ; fail

  RenameDeclaration =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameDeclaration", "21,2,22,41")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "22,4,22,41")
    ; Let(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "22,8,22,36")
        ; list(
            s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "22,13,22,35")
            ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "22,13,22,22") ; RenameFdec
               + s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "22,26,22,35") ; RenameVdec)
          )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "22,39,22,40") ; id
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameDeclaration", "21,2,22,41")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameDeclaration", "21,2,22,41")
      ; fail

  RenameVdec :
    Vdec(x, e) -> <r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameVdec", "24,2,26,54")> Vdec(y, e)
    where r-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameVdec", "24,2,26,54")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameVdec", "24,2,26,54")
             ; fail
    where s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "26,10,26,54")
          ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "26,10,26,17")
             ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "26,10,26,12") ; new) => y)
          ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "26,20,26,54")
          ; rules (
              RenameVar :
                Var(x) -> Var(y)
            )
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameVdec", "24,2,26,54")
             ; fail

  RenameFdec :
    Fdec(f, xs, e) -> <r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameFdec", "28,2,30,65")> Fdec(g, xs, e)
    where r-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameFdec", "28,2,30,65")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameFdec", "28,2,30,65")
             ; fail
    where s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "30,10,30,65")
          ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "30,10,30,17")
             ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "30,10,30,12") ; new) => g)
          ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "30,20,30,65")
          ; rules (
              RenameCall :
                Call(f, es) -> Call(g, es)
            )
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameFdec", "28,2,30,65")
             ; fail

  RenameArgs :
    Fdec(f, xs, e) -> <r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameArgs", "32,2,35,70")> Fdec(f, ys, e)
    where r-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameArgs", "32,2,35,70")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameArgs", "32,2,35,70")
             ; fail
    where s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "34,10,35,70")
          ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "34,10,34,28")
             ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "34,10,34,22")
                ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "34,11,34,18")
                    ; map(
                        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "34,15,34,17") ; new
                      ))> xs) => ys)
          ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "35,10,35,70")
          ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "35,11,35,60")
              ; zip(
                  s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "35,15,35,59")
                  ; {s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "35,16,35,58")
                     ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "35,16,35,21")
                        ; ?(x, y))
                     ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "35,24,35,58")
                     ; rules (
                         RenameVar :
                           Var(x) -> Var(y)
                       )}
                ))> (xs, ys)
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "RenameArgs", "32,2,35,70")
             ; fail

  my-inline =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "my-inline", "37,2,43,4")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "38,2,43,4")
    ; rec i (
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "38,8,43,3")
        ; {|Inline:
             s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,4,42,16")
             ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,4,39,42")
                ; repeat(
                    s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,11,39,41")
                    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,11,39,21")
                       ; debug(
                           s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,17,39,20")
                           ; !"a"
                         ))
                    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,24,39,41")
                    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,24,39,28") ; Subst)
                    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,31,39,41")
                    ; debug(
                        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "39,37,39,40")
                        ; !"b"
                      )
                  ))
             ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "40,7,42,15")
             ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "40,7,40,21")
                ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "40,7,40,13") ; Declare)
                ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "40,16,40,21")
                ; all(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "40,20,40,20") ; i)
                <+ s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "41,10,42,15")
                   ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "41,10,41,32")
                      ; {|Subst:
                           s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "41,21,41,29")
                           ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "41,21,41,26") ; Inline)
                           ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "41,29,41,29")
                           ; i
                        |}
                      <+ s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "42,10,42,15")
                         ; all(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "42,14,42,14") ; i)))
          |}
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "my-inline", "37,2,43,4")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "my-inline", "37,2,43,4")
      ; fail

  Declare =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "Declare", "45,2,46,41")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "46,4,46,41")
    ; Let(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "46,8,46,36")
        ; list(
            s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "46,13,46,35")
            ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "46,13,46,22") ; DeclareFun
               + s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "46,26,46,35") ; DeclareVar)
          )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "46,39,46,40") ; id
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "Declare", "45,2,46,41")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "Declare", "45,2,46,41")
      ; fail

  DeclareVar =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "DeclareVar", "48,2,52,4")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "49,4,52,4")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "49,4,49,13")
       ; ?Vdec(x, e))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "50,4,52,4")
    ; rules ( Inline :
                Var(x) -> e )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "DeclareVar", "48,2,52,4")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "DeclareVar", "48,2,52,4")
      ; fail

  DeclareFun =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "DeclareFun", "54,2,61,4")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "55,4,61,4")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "55,4,55,22")
       ; ?fdec@Fdec(f, _, _))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "56,4,61,4")
    ; rules (
        Inline :
          Call(f, es) -> e
          where s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "59,14,60,65")
                ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "59,14,59,48")
                   ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "59,14,59,30")
                      ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "59,15,59,24") ; exp-rename)> fdec) => Fdec(_, xs, e))
                ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "60,14,60,65")
                ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "60,15,60,55")
                    ; zip(
                        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "60,19,60,54")
                        ; {s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "60,20,60,53")
                           ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "60,20,60,25")
                              ; ?(x, e))
                           ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "60,28,60,53")
                           ; rules ( Subst :
                                       Var(x) -> e )}
                      ))> (xs, es)
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "DeclareFun", "54,2,61,4")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "DeclareFun", "54,2,61,4")
      ; fail


strategies
  main-dynamic_rules_test =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "main-dynamic_rules_test", "65,2,75,4")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "66,4,75,4")
    ; test-suite(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "66,15,66,35")
        ; !"dynamic-rules-test"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "68,1,74,5")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "68,1,68,5") ; test1)
        ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "69,1,74,5")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "69,1,69,5") ; test2)
        ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "70,1,74,5")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "70,1,70,5") ; test3)
        ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "71,1,74,5")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "71,1,71,6") ; test4a)
        ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "72,1,74,5")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "72,1,72,6") ; test4b)
        ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "73,1,74,5")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "73,1,73,5") ; test5)
        ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "74,1,74,5")
        ; test6
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "main-dynamic_rules_test", "65,2,75,4")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "main-dynamic_rules_test", "65,2,75,4")
      ; fail

  test0 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test0", "77,2,88,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "78,4,88,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "78,15,78,22")
        ; !"test0"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "79,3,79,12") ; exp-rename
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "80,3,83,40")
        ; !Let(
             [ Fdec(
                 "f"
               , ["x"]
               , Var("x")
               )
             ]
           , Let(
               [ Fdec(
                   "g"
                 , ["x"]
                 , Plus(
                     Int(1)
                   , Call(
                       "f"
                     , [Var("x")]
                     )
                   )
                 )
               ]
             , Let(
                 [Vdec("x", Int(1))]
               , Call(
                   "g"
                 , [Var("x")]
                 )
               )
             )
           )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "84,3,87,43")
        ; !Let(
             [ Fdec(
                 "a_0"
               , ["b_0"]
               , Var("b_0")
               )
             ]
           , Let(
               [ Fdec(
                   "c_0"
                 , ["d_0"]
                 , Plus(
                     Int(1)
                   , Call(
                       "a_0"
                     , [Var("d_0")]
                     )
                   )
                 )
               ]
             , Let(
                 [Vdec("e_0", Int(1))]
               , Call(
                   "c_0"
                 , [Var("e_0")]
                 )
               )
             )
           )
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test0", "77,2,88,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test0", "77,2,88,1")
      ; fail

  test1 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test1", "90,2,95,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "91,4,95,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "91,15,91,22")
        ; !"test1"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "92,3,92,11") ; my-inline
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "93,3,93,50")
        ; !Let(
             [Vdec("x", Int(1))]
           , Call(
               "g"
             , [Var("x")]
             )
           )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "94,3,94,48")
        ; !Let(
             [Vdec("x", Int(1))]
           , Call(
               "g"
             , [Int(1)]
             )
           )
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test1", "90,2,95,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test1", "90,2,95,1")
      ; fail

  test2 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test2", "97,2,106,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "98,4,106,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "98,15,98,22")
        ; !"test2"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "99,3,99,11") ; my-inline
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "100,3,102,61")
        ; !Let(
             [ Fdec(
                 "f"
               , ["x"]
               , Var("x")
               )
             ]
           , Let(
               [ Fdec(
                   "g"
                 , ["x"]
                 , Plus(
                     Int(1)
                   , Call(
                       "f"
                     , [Var("x")]
                     )
                   )
                 )
               ]
             , Let(
                 [Vdec("x", Int(1))]
               , Call(
                   "g"
                 , [Var("x")]
                 )
               )
             )
           )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "103,5,105,58")
        ; !Let(
             [ Fdec(
                 "f"
               , ["x"]
               , Var("x")
               )
             ]
           , Let(
               [ Fdec(
                   "g"
                 , ["x"]
                 , Plus(
                     Int(1)
                   , Var("x")
                   )
                 )
               ]
             , Let(
                 [Vdec("x", Int(1))]
               , Plus(
                   Int(1)
                 , Int(1)
                 )
               )
             )
           )
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test2", "97,2,106,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test2", "97,2,106,1")
      ; fail

  test3 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test3", "108,2,117,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "109,4,117,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "109,15,109,22")
        ; !"test3"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "110,3,110,11") ; my-inline
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "111,3,113,35")
        ; !Let(
             [ Fdec(
                 "f"
               , ["x"]
               , Plus(
                   Int(1)
                 , Var("x")
                 )
               )
             ]
           , Let(
               [ Fdec(
                   "g"
                 , ["x"]
                 , Call(
                     "f"
                   , [Var("x")]
                   )
                 )
               ]
             , Call(
                 "g"
               , [Int(2)]
               )
             )
           )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "114,3,116,35")
        ; !Let(
             [ Fdec(
                 "f"
               , ["x"]
               , Plus(
                   Int(1)
                 , Var("x")
                 )
               )
             ]
           , Let(
               [ Fdec(
                   "g"
                 , ["x"]
                 , Plus(
                     Int(1)
                   , Var("x")
                   )
                 )
               ]
             , Plus(
                 Int(1)
               , Int(2)
               )
             )
           )
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test3", "108,2,117,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test3", "108,2,117,1")
      ; fail


strategies
  define-bla =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "define-bla", "121,2,122,31")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "122,4,122,31")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "122,4,122,10")
       ; ?(f, g))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "122,13,122,31")
    ; rules ( Bla :
                f -> g )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "define-bla", "121,2,122,31")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "define-bla", "121,2,122,31")
      ; fail

  override1 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "override1", "124,2,129,9")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "125,4,129,9")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "125,4,125,26")
       ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "125,5,125,14") ; define-bla)> ("f", "g"))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "126,4,129,9")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "126,4,126,17")
       ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "126,4,126,12")
          ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "126,5,126,7") ; Bla)> "f") => x)
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "127,4,129,9")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "127,4,127,26")
       ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "127,5,127,14") ; define-bla)> ("f", "h"))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "128,4,129,9")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "128,4,128,17")
       ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "128,4,128,12")
          ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "128,5,128,7") ; Bla)> "f") => y)
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "129,4,129,9")
    ; !(x, y)
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "override1", "124,2,129,9")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "override1", "124,2,129,9")
      ; fail

  test4a =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test4a", "131,2,136,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "132,4,136,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "132,15,132,23")
        ; !"test4a"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "133,3,133,11") ; override1
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "134,3,134,5")
        ; !()
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "135,3,135,13")
        ; !("g", "h")
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test4a", "131,2,136,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test4a", "131,2,136,1")
      ; fail

  override2 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "override2", "138,2,148,13")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "139,4,148,13")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "139,4,139,26")
       ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "139,5,139,14") ; define-bla)> ("f", "g"))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "140,4,148,13")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "140,4,140,17")
       ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "140,4,140,12")
          ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "140,5,140,7") ; Bla)> "f") => x)
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "141,4,148,13")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "141,4,146,5")
       ; {|Bla:
            s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "142,7,145,22")
            ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "142,7,142,29")
               ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "142,8,142,17") ; define-bla)> ("f", "h"))
            ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "143,9,145,22")
            ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "143,9,143,22")
               ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "143,9,143,17")
                  ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "143,10,143,12") ; Bla)> "f") => y)
            ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "144,9,145,22")
            ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "144,9,144,31")
               ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "144,10,144,19") ; define-bla)> ("f", "i"))
            ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "145,9,145,22")
            ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "145,9,145,17")
               ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "145,10,145,12") ; Bla)> "f") => z
         |})
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "147,4,148,13")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "147,4,147,17")
       ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "147,4,147,12")
          ; <(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "147,5,147,7") ; Bla)> "f") => a)
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "148,4,148,13")
    ; !(x, y, z, a)
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "override2", "138,2,148,13")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "override2", "138,2,148,13")
      ; fail

  test4b =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test4b", "150,2,155,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "151,4,155,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "151,15,151,23")
        ; !"test4b"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "152,3,152,11") ; override2
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "153,3,153,5")
        ; !()
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "154,3,154,23")
        ; !("g", "h", "i", "g")
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test4b", "150,2,155,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test4b", "150,2,155,1")
      ; fail


strategies
  UnDeclareFun =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "UnDeclareFun", "159,2,161,34")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "160,4,161,34")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "160,4,160,17")
       ; ?Fdec(f, _, _))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "161,6,161,34")
    ; rules ( NewRule :-
                Call(f, _) )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "UnDeclareFun", "159,2,161,34")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "UnDeclareFun", "159,2,161,34")
      ; fail

  test5 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test5", "163,2,168,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "164,4,168,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "164,15,164,22")
        ; !"test5"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,3,165,38")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,3,165,19")
           ; ( s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,4,165,15") ; UnDeclareFun
             , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,17,165,18") ; id
             ))
        ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,22,165,38")
        ; ( s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,23,165,24") ; id
          , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,26,165,37")
            ; try(
                s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "165,30,165,36") ; NewRule
              )
          )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "166,3,166,38")
        ; !( Fdec("f", "i", "g")
           , Call("f", [])
           )
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "167,3,167,38")
        ; !( Fdec("f", "i", "g")
           , Call("f", [])
           )
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test5", "163,2,168,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test5", "163,2,168,1")
      ; fail


strategies
  GenRule1 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "GenRule1", "172,2,173,45")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "173,4,173,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "173,4,173,14")
       ; !("a", "b"))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "173,17,173,45")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "173,17,173,23")
       ; ?(x, y))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "173,26,173,45")
    ; rules ( Rule :
                x -> y )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "GenRule1", "172,2,173,45")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "GenRule1", "172,2,173,45")
      ; fail

  GenRule2 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "GenRule2", "175,2,176,49")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "176,4,176,49")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "176,4,176,14")
       ; !("a", "b"))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "176,17,176,49")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "176,17,176,23")
       ; ?(x, y))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "176,26,176,49")
    ; rules (
        Rule :
          x -> (y, y)
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "GenRule2", "175,2,176,49")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "GenRule2", "175,2,176,49")
      ; fail

  test6 =
    s-enter(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test6", "178,2,190,1")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "179,4,190,1")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "179,4,179,18")
       ; where(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "179,10,179,17") ; GenRule1))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "180,4,190,1")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "180,4,184,1")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "180,15,180,23")
           ; !"test6a"
         , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "181,2,181,5") ; Rule
         , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "182,2,182,5")
           ; !"a"
         , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "183,2,183,5")
           ; !"b"
         ))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "185,4,190,1")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "185,4,185,18")
       ; where(s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "185,10,185,17") ; GenRule2))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "186,4,190,1")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "186,15,186,23")
        ; !"test6b"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "187,2,187,5") ; Rule
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "188,2,188,5")
        ; !"a"
      , s-step(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "189,2,189,11")
        ; !("b", "b")
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test6", "178,2,190,1")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/test/strc2/dynamic_rules_test.str", "test6", "178,2,190,1")
      ; fail