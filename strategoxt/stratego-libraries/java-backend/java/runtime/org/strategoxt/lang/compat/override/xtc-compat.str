module xtc-compat

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib
  libstratego-xtc


strategies
  override xtc-find =
             s-enter(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "xtc-find", "14,11,18,5")
             ; s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "15,4,18,5")
             ; (s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "15,4,16,10")
                ; (s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "15,4,15,85")
                   ; warn-msg(
                     | [ <s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "15,16,15,39")
                          ; (s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "15,16,15,21") ; whoami
                             <+ s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "15,26,15,39")
                                ; !"application")>
                       , " uses xtc to find non-local file "
                       , <s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "15,81,15,82") ; id>
                       ]
                     ))
                ; s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "16,4,16,10")
                ; proceed
                <+ s-step(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "18,4,18,5") ; id)
             < s-exit(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "xtc-find", "14,11,18,5")
             + s-exit(|"strategoxt/stratego-libraries/java-backend/java/runtime/org/strategoxt/lang/compat/override/xtc-compat.str", "xtc-find", "14,11,18,5")
               ; fail