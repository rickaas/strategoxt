module regular-xtc-tools

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  pp-rtg
  libstratego-sglr
  libstrc


strategies
  xtc-pp-abstract-stratego =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
    , "xtc-pp-abstract-stratego"
    , "9"
    , "2"
    , "17"
    , "14"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "10"
      , "4"
      , "17"
      , "14"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "10"
       , "4"
       , "13"
       , "4"
       )
       ; with(s-step(
              | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
              , "11"
              , "6"
              , "12"
              , "40"
              )
              ; (s-step(
                 | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
                 , "11"
                 , "6"
                 , "11"
                 , "29"
                 )
                 ; file := <s-step(
                            | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
                            , "11"
                            , "17"
                            , "11"
                            , "28"
                            )
                            ; xtc-new-file>)
              ; s-step(
                | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
                , "12"
                , "6"
                , "12"
                , "40"
                )
              ; stream := <s-step(
                           | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
                           , "12"
                           , "17"
                           , "12"
                           , "27"
                           )
                           ; open-stream> (file, "w")))
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "14"
      , "4"
      , "17"
      , "14"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "14"
       , "4"
       , "16"
       , "4"
       )
       ; finally(
           s-step(
           | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
           , "15"
           , "6"
           , "15"
           , "32"
           )
           ; pp-stratego-stream(|stream)
         , s-step(
           | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
           , "15"
           , "35"
           , "15"
           , "49"
           )
           ; <(s-step(
               | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
               , "15"
               , "36"
               , "15"
               , "41"
               )
               ; fclose)> stream
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "17"
      , "4"
      , "17"
      , "14"
      )
    ; !FILE(file)
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "xtc-pp-abstract-stratego"
      , "9"
      , "2"
      , "17"
      , "14"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "xtc-pp-abstract-stratego"
      , "9"
      , "2"
      , "17"
      , "14"
      )
      ; fail

  xtc-rtg-front-end =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
    , "xtc-rtg-front-end"
    , "22"
    , "2"
    , "27"
    , "26"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "23"
      , "4"
      , "27"
      , "26"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "23"
       , "4"
       , "23"
       , "18"
       )
       ; xtc-ensure-file)
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "24"
      , "6"
      , "27"
      , "26"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "24"
       , "6"
       , "24"
       , "16"
       )
       ; ?FILE(
            <s-step(
             | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
             , "24"
             , "13"
             , "24"
             , "14"
             )
             ; id>
          ))
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "25"
      , "6"
      , "27"
      , "26"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "25"
       , "6"
       , "25"
       , "19"
       )
       ; parse-rtg-file)
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "26"
      , "6"
      , "27"
      , "26"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "26"
       , "6"
       , "26"
       , "15"
       )
       ; rtg-reduce)
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "27"
      , "6"
      , "27"
      , "26"
      )
    ; rtg-group-productions
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "xtc-rtg-front-end"
      , "22"
      , "2"
      , "27"
      , "26"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "xtc-rtg-front-end"
      , "22"
      , "2"
      , "27"
      , "26"
      )
      ; fail

  xtc-pp-rtg =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
    , "xtc-pp-rtg"
    , "33"
    , "2"
    , "36"
    , "13"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "34"
      , "4"
      , "36"
      , "13"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "34"
       , "4"
       , "34"
       , "29"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
               , "34"
               , "10"
               , "34"
               , "28"
               )
               ; f := <s-step(
                       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
                       , "34"
                       , "16"
                       , "34"
                       , "27"
                       )
                       ; xtc-new-file>))
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "35"
      , "6"
      , "36"
      , "13"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "35"
       , "6"
       , "35"
       , "20"
       )
       ; pp-rtg-file(|f))
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "36"
      , "6"
      , "36"
      , "13"
      )
    ; !FILE(f)
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "xtc-pp-rtg"
      , "33"
      , "2"
      , "36"
      , "13"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "xtc-pp-rtg"
      , "33"
      , "2"
      , "36"
      , "13"
      )
      ; fail


strategies
  my-parse-rtg-file =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
    , "my-parse-rtg-file"
    , "43"
    , "2"
    , "46"
    , "17"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "44"
      , "4"
      , "46"
      , "17"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "44"
       , "4"
       , "44"
       , "41"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
               , "44"
               , "10"
               , "44"
               , "40"
               )
               ; tbl := <s-step(
                         | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
                         , "44"
                         , "18"
                         , "44"
                         , "39"
                         )
                         ; my-get-rtg-parse-table>))
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "45"
      , "6"
      , "46"
      , "17"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "45"
       , "6"
       , "45"
       , "21"
       )
       ; parse-file(|tbl))
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "46"
      , "6"
      , "46"
      , "17"
      )
    ; rtg-parsefix
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "my-parse-rtg-file"
      , "43"
      , "2"
      , "46"
      , "17"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "my-parse-rtg-file"
      , "43"
      , "2"
      , "46"
      , "17"
      )
      ; fail

  my-get-rtg-parse-table =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
    , "my-get-rtg-parse-table"
    , "48"
    , "2"
    , "53"
    , "44"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "49"
      , "4"
      , "53"
      , "44"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
       , "49"
       , "4"
       , "49"
       , "22"
       )
       ; MyMemoRTGParseTable
       <+ s-step(
          | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
          , "50"
          , "7"
          , "53"
          , "44"
          )
          ; (s-step(
             | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
             , "50"
             , "7"
             , "50"
             , "25"
             )
             ; get-rtg-parse-table)
          ; s-step(
            | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
            , "51"
            , "9"
            , "53"
            , "44"
            )
          ; (s-step(
             | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
             , "51"
             , "9"
             , "51"
             , "24"
             )
             ; open-parse-table)
          ; s-step(
            | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
            , "52"
            , "9"
            , "53"
            , "44"
            )
          ; (s-step(
             | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
             , "52"
             , "9"
             , "52"
             , "12"
             )
             ; ?tbl)
          ; s-step(
            | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
            , "53"
            , "9"
            , "53"
            , "44"
            )
          ; rules ( MyMemoRTGParseTable :
                      _ -> tbl ))
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "my-get-rtg-parse-table"
      , "48"
      , "2"
      , "53"
      , "44"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/regular-xtc-tools.str"
      , "my-get-rtg-parse-table"
      , "48"
      , "2"
      , "53"
      , "44"
      )
      ; fail

  external STRRTG-get-rtg-parsetable(|)