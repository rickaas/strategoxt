module sdf2rtg

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib
  libstratego-xtc
  libstratego-tool-doc
  lib/pp-rtg
  lib/sdf-options
  lib/core-sdf-grammar2rtg
  regular-xtc-tools
  sdf-desugar
  native-transform


strategies
  main-sdf2rtg =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
    , "main-sdf2rtg"
    , "15"
    , "2"
    , "22"
    , "4"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "16"
      , "4"
      , "22"
      , "4"
      )
    ; xtc-io-wrap(
        s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "17"
        , "6"
        , "17"
        , "71"
        )
        ; (s-step(
           | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
           , "17"
           , "6"
           , "17"
           , "27"
           )
           ; sdf-main-module-option
           + s-step(
             | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
             , "17"
             , "31"
             , "17"
             , "71"
             )
             ; (s-step(
                | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
                , "17"
                , "31"
                , "17"
                , "43"
                )
                ; ignore-option
                + s-step(
                  | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
                  , "17"
                  , "47"
                  , "17"
                  , "71"
                  )
                  ; native-executables-option))
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "18"
        , "6"
        , "18"
        , "18"
        )
        ; sdf2rtg-usage
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "19"
        , "6"
        , "19"
        , "18"
        )
        ; sdf2rtg-about
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "20"
        , "6"
        , "20"
        , "32"
        )
        ; !["sdf2table", "implodePT"]
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "21"
        , "6"
        , "21"
        , "12"
        )
        ; sdf2rtg
      )
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "main-sdf2rtg"
      , "15"
      , "2"
      , "22"
      , "4"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "main-sdf2rtg"
      , "15"
      , "2"
      , "22"
      , "4"
      )
      ; fail

  sdf2rtg =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
    , "sdf2rtg"
    , "24"
    , "2"
    , "31"
    , "18"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "25"
      , "6"
      , "31"
      , "18"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
       , "25"
       , "6"
       , "30"
       , "15"
       )
       ; (s-step(
          | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
          , "25"
          , "6"
          , "25"
          , "92"
          )
          ; native-transform(
              s-step(
              | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
              , "25"
              , "23"
              , "25"
              , "34"
              )
              ; !"sdf2table"
            , s-step(
              | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
              , "25"
              , "37"
              , "25"
              , "91"
              )
              ; !["-n", "-m", <s-step(
                               | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
                               , "25"
                               , "52"
                               , "25"
                               , "70"
                               )
                               ; get-sdf-main-module>|<s-step(
                                                       | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
                                                       , "25"
                                                       , "76"
                                                       , "25"
                                                       , "89"
                                                       )
                                                       ; pass-v-verbose>]
            ))
       ; s-step(
         | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
         , "26"
         , "6"
         , "30"
         , "15"
         )
       ; (s-step(
          | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
          , "26"
          , "6"
          , "26"
          , "40"
          )
          ; native-transform(
              s-step(
              | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
              , "26"
              , "23"
              , "26"
              , "34"
              )
              ; !"implodePT"
            , s-step(
              | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
              , "26"
              , "37"
              , "26"
              , "39"
              )
              ; ![]
            ))
       ; s-step(
         | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
         , "27"
         , "6"
         , "30"
         , "15"
         )
       ; (s-step(
          | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
          , "27"
          , "6"
          , "27"
          , "14"
          )
          ; read-from)
       ; s-step(
         | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
         , "28"
         , "6"
         , "30"
         , "15"
         )
       ; (s-step(
          | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
          , "28"
          , "6"
          , "28"
          , "16"
          )
          ; sdf-desugar)
       ; s-step(
         | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
         , "29"
         , "6"
         , "30"
         , "15"
         )
       ; (s-step(
          | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
          , "29"
          , "6"
          , "29"
          , "25"
          )
          ; core-sdf-grammar2rtg)
       ; s-step(
         | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
         , "30"
         , "6"
         , "30"
         , "15"
         )
       ; xtc-pp-rtg
       <+ s-step(
          | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
          , "31"
          , "7"
          , "31"
          , "18"
          )
          ; <(s-step(
              | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
              , "31"
              , "8"
              , "31"
              , "15"
              )
              ; xtc-exit)> 1)
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "sdf2rtg"
      , "24"
      , "2"
      , "31"
      , "18"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "sdf2rtg"
      , "24"
      , "2"
      , "31"
      , "18"
      )
      ; fail

  ignore-option =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
    , "ignore-option"
    , "33"
    , "2"
    , "37"
    , "4"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "34"
      , "4"
      , "37"
      , "4"
      )
    ; Option(
        s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "34"
        , "11"
        , "34"
        , "33"
        )
        ; "--ignore-missing-cons"
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "35"
        , "6"
        , "35"
        , "43"
        )
        ; <(s-step(
            | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
            , "35"
            , "7"
            , "35"
            , "16"
            )
            ; set-config)> (IgnoreMissingCons(), ())
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "36"
        , "6"
        , "36"
        , "119"
        )
        ; !HelpString("--ignore-missing-cons", "Ignore productions that do not have a constructor (default: produce error)")
      )
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "ignore-option"
      , "33"
      , "2"
      , "37"
      , "4"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "ignore-option"
      , "33"
      , "2"
      , "37"
      , "4"
      )
      ; fail

  module-option =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
    , "module-option"
    , "39"
    , "2"
    , "43"
    , "4"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "40"
      , "4"
      , "43"
      , "4"
      )
    ; ArgOption(
        s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "40"
        , "14"
        , "40"
        , "23"
        )
        ; "--module"
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "41"
        , "6"
        , "41"
        , "43"
        )
        ; where(s-step(
                | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
                , "41"
                , "12"
                , "41"
                , "42"
                )
                ; <(s-step(
                    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
                    , "41"
                    , "13"
                    , "41"
                    , "22"
                    )
                    ; set-config)> ( "--module"
                                   , <s-step(
                                      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
                                      , "41"
                                      , "39"
                                      , "41"
                                      , "40"
                                      )
                                      ; id>
                                   ))
      , s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "42"
        , "6"
        , "42"
        , "52"
        )
        ; !"--module n       Generated module has name n"
      )
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "module-option"
      , "39"
      , "2"
      , "43"
      , "4"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "module-option"
      , "39"
      , "2"
      , "43"
      , "4"
      )
      ; fail

  sdf2rtg-usage =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
    , "sdf2rtg-usage"
    , "45"
    , "2"
    , "53"
    , "6"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "46"
      , "4"
      , "53"
      , "6"
      )
    ; <(s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "46"
        , "5"
        , "46"
        , "12"
        )
        ; tool-doc)> [ Usage("sdf2rtg [OPTIONS]")
                     , Summary("Generates an abstract syntax definition in the rtg language
          from a SDF concrete syntax definition.")
                     , OptionUsage()
                     , AutoReportBugs()
                     ]
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "sdf2rtg-usage"
      , "45"
      , "2"
      , "53"
      , "6"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "sdf2rtg-usage"
      , "45"
      , "2"
      , "53"
      , "6"
      )
      ; fail

  sdf2rtg-about =
    s-enter(
    | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
    , "sdf2rtg-about"
    , "55"
    , "2"
    , "64"
    , "6"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "56"
      , "4"
      , "64"
      , "6"
      )
    ; <(s-step(
        | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
        , "56"
        , "5"
        , "56"
        , "12"
        )
        ; tool-doc)> [ AutoProgram()
                     , Author(Person("Martin Bravenboer", "martin.bravenboer@gmail.com"))
                     , GNU_LGPL("2002-2008", "Stratego Software Foundation <stratego@cs.uu.nl>")
                     , Config([DefaultXTCRepository(), CurrentXTCRepository()])
                     ]
    < s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "sdf2rtg-about"
      , "55"
      , "2"
      , "64"
      , "6"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf2rtg.str"
      , "sdf2rtg-about"
      , "55"
      , "2"
      , "64"
      , "6"
      )
      ; fail


signature
  constructors
    IgnoreMissingCons : Option