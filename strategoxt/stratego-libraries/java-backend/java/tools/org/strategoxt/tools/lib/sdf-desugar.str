module sdf2imp/lib/sdf-desugar

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-aterm


strategies
  sdf-desugar =
    s-enter(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "sdf-desugar", "18,2,19,53")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "19,6,19,53")
    ; topdown(
        s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "19,14,19,52")
        ; (s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "19,14,19,31")
           ; repeat(
               s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "19,21,19,30") ; SdfDesugar
             ))
        ; s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "19,34,19,52")
        ; try(
            s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "19,38,19,51") ; SdfDesugarOnce
          )
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "sdf-desugar", "18,2,19,53")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "sdf-desugar", "18,2,19,53")
      ; fail

  SdfDesugar :
    no-attrs() -> <r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugar", "21,2,22,26")> attrs([])
    where r-enter(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugar", "21,2,22,26")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugar", "21,2,22,26")
             ; fail

  SdfDesugar :
    term(default(t)) -> <r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugar", "24,2,25,30")> term(t)
    where r-enter(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugar", "24,2,25,30")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugar", "24,2,25,30")
             ; fail


rules

  SdfDesugarOnce =
    s-enter(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "29,2,31,22")
    ; s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "30,4,31,22")
    ; (s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "30,4,30,22")
       ; alltd(
           s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "30,10,30,21") ; EnsureQuotes
         ))
    ; s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "31,4,31,22")
    ; term(
        s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "31,9,31,21") ; implode-aterm
      )
    < s-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "29,2,31,22")
    + s-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "29,2,31,22")
      ; fail

  SdfDesugarOnce :
    lit(s) -> <r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "33,2,34,37")> lit(
                                                                                                                                                            <s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "34,19,34,33") ; un-double-quote> s
                                                                                                                                                          )
    where r-enter(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "33,2,34,37")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "33,2,34,37")
             ; fail

  SdfDesugarOnce :
    ci-lit(s) -> <r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "36,2,37,43")> ci-lit(
                                                                                                                                                               <s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "37,25,37,39") ; un-single-quote> s
                                                                                                                                                             )
    where r-enter(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "36,2,37,43")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "SdfDesugarOnce", "36,2,37,43")
             ; fail

  EnsureQuotes :
    quoted(s) -> <r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "EnsureQuotes", "39,2,42,29")> quoted(
                                                                                                                                                             <s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "40,25,40,36") ; double-quote> s
                                                                                                                                                           )
    where r-enter(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "EnsureQuotes", "39,2,42,29")
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "EnsureQuotes", "39,2,42,29")
             ; fail
    where s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "42,6,42,29")
          ; not(s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "42,10,42,28")
                ; <(s-step(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "42,11,42,25") ; un-double-quote)> s)
          <+ r-exit(|"strategoxt/stratego-libraries/java-backend/java/tools/org/strategoxt/tools/lib/sdf-desugar.str", "EnsureQuotes", "39,2,42,29")
             ; fail