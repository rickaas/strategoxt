module stratego/error-support/report

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-xtc
  stratego/error-support/error-support


strategies
  report-error-summary(|summary) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error-summary", "19,2,30,68")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "20,4,30,68")
    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "20,4,28,6")
       ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "20,4,20,9") ; ?input)
       ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "21,6,28,6")
       ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "22,8,27,9")
               ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "22,8,22,47")
                  ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "22,8,22,15") ; !summary) => summary(producer, _, errors))
               ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "23,8,27,9")
               ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "23,8,23,14") ; !errors)
               ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "24,8,27,9")
               ; map(
                   s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "24,12,27,8")
                   ; {error:
                       s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "25,10,26,90")
                       ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "25,10,25,15") ; ?error)
                       ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "26,10,26,90")
                       ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "26,11,26,83")
                           ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "26,11,26,49")
                              ; report-specific-error(|producer, error)
                              <+ s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "26,54,26,83")
                                 ; report-error(|producer, error)))> input
                     }
                 ))
       <+ s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "29,7,30,68")
          ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "29,7,29,124")
             ; say(
                 s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "29,11,29,123")
                 ; !"error: An error occured, but the error summary cannot be presented in a nice way. Please report this as a bug."
               ))
          ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "30,9,30,68")
          ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "30,15,30,67")
                  ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "30,16,30,58")
                      ; debug(
                          s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "30,22,30,57")
                          ; !"       Structured error summary: "
                        ))> summary))
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error-summary", "19,2,30,68")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error-summary", "19,2,30,68")
      ; fail

  report-error(|producer, error) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error", "36,2,37,23")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "37,4,37,23")
    ; report-error(|error)
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error", "36,2,37,23")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error", "36,2,37,23")
      ; fail

  report-error(|error) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error", "39,2,45,12")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "40,4,45,12")
    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "40,4,41,43")
       ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "40,4,40,60")
          ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "40,10,40,59")
                  ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "40,10,40,15") ; !error) => error(
                                                                                                                                       err
                                                                                                                                     , [localized(descr, location)]
                                                                                                                                     )))
       ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "41,6,41,43")
       ; report-location(|err, descr, location)
       <+ s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "43,7,45,12")
          ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "43,7,43,116")
             ; say(
                 s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "43,11,43,115")
                 ; !"error: An error occured, but the error cannot be presented in a nice way. Please report this as a bug."
               ))
          ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "44,9,45,12")
          ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "44,9,44,58")
             ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "44,15,44,57")
                     ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "44,16,44,50")
                         ; debug(
                             s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "44,22,44,49")
                             ; !"       Structured error: "
                           ))> error))
          ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "45,9,45,12")
          ; fail)
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error", "39,2,45,12")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-error", "39,2,45,12")
      ; fail

  report-location(|err, descr, location) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-location", "51,2,53,41")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "52,4,53,41")
    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "52,4,52,47")
       ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "52,10,52,46")
               ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "52,10,52,18") ; !location) => area-in-file(file, area)))
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "53,6,53,41")
    ; report-area(|err, descr, file, area)
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-location", "51,2,53,41")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-location", "51,2,53,41")
      ; fail

  report-location(|err, descr, location) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-location", "59,2,61,35")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "60,4,61,35")
    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "60,4,60,33")
       ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "60,10,60,32")
               ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "60,10,60,18") ; !location) => file(file)))
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "61,6,61,35")
    ; report-file(|err, descr, file)
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-location", "59,2,61,35")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-location", "59,2,61,35")
      ; fail


strategies
  report-specific-error(|producer, error) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-specific-error", "90,2,101,4")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "91,4,101,4")
    ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "92,6,100,7")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "92,6,92,39")
               ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "92,6,92,11") ; !error) => error(
                                                                                                                                   "Ambiguity"
                                                                                                                                 , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "92,36,92,37") ; id>
                                                                                                                                 ))
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "93,6,100,7")
            ; map(
                s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "93,10,100,6")
                ; {descr, file, area:
                    s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "94,8,99,23")
                    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "94,8,94,50")
                       ; ?localized(descr, area-in-file(file, area)))
                    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "95,8,99,23")
                    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "95,8,95,54")
                       ; report-area(|"", "Ambiguity found", file, area))
                    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "96,8,99,23")
                    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "96,8,96,41")
                       ; log(|Error(), "Alternatives are: "))
                    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "97,8,99,23")
                    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "97,8,97,37")
                       ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "97,9,97,23") ; string-tokenize)> ([';'], descr))
                    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "98,8,99,23")
                    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "98,8,98,54")
                       ; map(
                           s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "98,12,98,53")
                           ; log(
                             | Error()
                             , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "98,26,98,39") ; concat-strings> [ "   "
                                                                                                                                                     , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "98,49,98,50") ; id>
                                                                                                                                                     ]
                             )
                         ))
                    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "99,8,99,23")
                    ; log(|Error(), "")
                  }
              ))
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-specific-error", "90,2,101,4")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-specific-error", "90,2,101,4")
      ; fail


strategies
  report-file(|err, descr, file) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-file", "108,2,109,65")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "109,4,109,65")
    ; log(
      | Error()
      , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "109,18,109,31") ; concat-strings> [file, ": '", err, "': ", descr]
      )
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-file", "108,2,109,65")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-file", "108,2,109,65")
      ; fail

  report-area(|err, descr, file, area) =
    s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-area", "114,2,180,6")
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "115,4,180,6")
    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "115,4,117,4")
       ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "116,6,116,65")
               ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "116,6,116,10") ; !area) => area(begin-line, begin-column, _, end-column, _, _)))
    ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "119,4,180,6")
    ; let y-pos =
            s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "y-pos", "119,8,121,48")
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "120,10,121,48")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "120,10,120,25")
               ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "120,11,120,13") ; dec)> begin-line)
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "121,12,121,48")
            ; if s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "121,15,121,28")
                 ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "121,16,121,17") ; lt)> ( <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "121,22,121,23") ; id>
                                                                                                                                 , 0
                                                                                                                                 ) then
                s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "121,35,121,36")
                ; !0
              else
                s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "121,43,121,44") ; id
              end
            < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "y-pos", "119,8,121,48")
            + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "y-pos", "119,8,121,48")
              ; fail
          x-pos =
            s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "x-pos", "123,8,125,45")
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "124,10,125,45")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "124,10,124,32")
               ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "124,10,124,27")
                  ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "124,11,124,13") ; dec)> begin-column) => c)
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "125,12,125,45")
            ; if s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "125,15,125,25")
                 ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "125,16,125,17") ; lt)> (c, 0) then
                s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "125,32,125,33")
                ; !0
              else
                s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "125,40,125,41") ; id
              end
            < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "x-pos", "123,8,125,45")
            + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "x-pos", "123,8,125,45")
              ; fail
          filename =
            s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "filename", "127,8,132,12")
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "128,10,132,12")
            ; if s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "128,13,128,24")
                 ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "128,13,128,17") ; !file) => "-" then
                s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "129,12,129,19")
                ; !"stdin"
              else
                s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "131,12,131,16") ; !file
              end
            < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "filename", "127,8,132,12")
            + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "filename", "127,8,132,12")
              ; fail
          print-location =
            s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "print-location", "134,8,142,10")
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "135,10,142,10")
            ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "136,5,141,13")
                    ; log(
                      | Error()
                      , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "137,13,137,26") ; concat-strings> [ <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "138,15,138,22") ; filename> ()
                                                                                                                                                , ": "
                                                                                                                                                , descr
                                                                                                                                                , " at line "
                                                                                                                                                , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "139,15,139,27") ; int-to-string> begin-line
                                                                                                                                                , ", column "
                                                                                                                                                , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "140,15,140,27") ; int-to-string> begin-column
                                                                                                                                                ]
                      ))
            < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "print-location", "134,8,142,10")
            + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "print-location", "134,8,142,10")
              ; fail
          print-context-in-file =
            s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "print-context-in-file", "144,8,167,22")
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "145,10,167,22")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "145,10,145,18") ; get-lines)
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "146,12,167,22")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "146,12,146,22") ; add-indices)
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "147,12,167,22")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "147,12,147,28")
               ; where(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "147,18,147,27")
                       ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "147,18,147,22") ; y-pos) => y))
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "148,12,167,22")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "148,12,153,14")
               ; if s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "148,15,148,21")
                    ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "148,15,148,16") ; !y) => 0 then
                   s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "149,14,149,37")
                   ; \ [line|_] -> [line] \
                 else
                   s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "151,14,152,23")
                   ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "151,14,151,47")
                      ; at-suffix(
                          s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "151,24,151,46")
                          ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "151,24,151,36")
                             ; ?[(y, _)|_])
                          ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "151,39,151,46")
                          ; ?context
                        ))
                   ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "152,16,152,23")
                   ; !context
                 end)
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "158,12,167,22")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "158,12,160,14")
               ; if s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "158,15,158,28")
                    ; ?[s1, s2|_] then
                   s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "159,14,159,22")
                   ; ![s1, s2]
                 end)
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "161,12,167,22")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "161,12,161,35")
               ; map(
                   s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "161,16,161,34")
                   ; log(
                     | Error()
                     , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "161,30,161,32") ; Snd>
                     )
                 ))
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "166,12,167,22")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "166,12,166,62")
               ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "166,13,166,24") ; conc-strings)> ( <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "166,29,166,37") ; copy-char> ( <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "166,42,166,46") ; x-pos> ()
                                                                                                                                                                                                                                                              , ' '
                                                                                                                                                                                                                                                              )
                                                                                                                                         , "^"
                                                                                                                                         ))
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "167,5,167,22")
            ; log(
              | Error()
              , <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "167,19,167,20") ; id>
              )
            < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "print-context-in-file", "144,8,167,22")
            + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "print-context-in-file", "144,8,167,22")
              ; fail
          read-input-file =
            s-enter(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "read-input-file", "172,10,174,23")
            ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "173,15,174,23")
            ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "173,15,173,37")
               ; ?FILE(
                    <s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "173,22,173,35") ; read-text-file>
                  )
               <+ s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "174,15,174,23") ; is-string)
            < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "read-input-file", "172,10,174,23")
            + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "read-input-file", "172,10,174,23")
              ; fail
      in
        s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "176,8,179,10")
        ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "176,8,176,21") ; print-location)
        ; s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "177,8,179,10")
        ; if s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "177,11,177,32")
             ; (s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "177,11,177,25") ; read-input-file) => txt then
            s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "178,10,178,36")
            ; <(s-step(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "178,11,178,31") ; print-context-in-file)> txt
          end
      end
    < s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-area", "114,2,180,6")
    + s-exit(|"strategoxt/stratego-libraries/sglr/lib/stratego/error-support/report.str", "report-area", "114,2,180,6")
      ; fail