module tables-test

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib


strategies
  main-tables-test =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "main-tables-test", "8,2,29,4")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "9,4,29,4")
    ; test-suite(
        s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "9,15,9,28")
        ; !"tables-test"
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "10,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "10,6,10,17") ; legacy-tests)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "12,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "12,6,12,16") ; test-create)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "13,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "13,6,13,13") ; test-put)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "14,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "14,6,14,13") ; test-get)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "15,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "15,6,15,16") ; test-remove)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "16,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "16,6,16,14") ; test-keys)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "18,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "18,6,18,17") ; test-getlist)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "19,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "19,6,19,17") ; test-putlist)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "20,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "20,6,20,14") ; test-copy)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "22,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "22,6,22,15") ; test-stack)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "24,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "24,6,24,19") ; test-intersect)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "25,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "25,6,25,15") ; test-union)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "27,6,28,14")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "27,6,27,12") ; test-eq)
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "28,6,28,14")
        ; test-fold
      )
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "main-tables-test", "8,2,29,4")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "main-tables-test", "8,2,29,4")
      ; fail


strategies
  legacy-tests =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "legacy-tests", "33,2,49,6")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "33,17,49,6")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "33,17,33,18") ; id)
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "34,6,49,6")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "34,6,38,6")
       ; apply-and-check(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "34,22,34,40")
           ; !"legacy table-put"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "35,8,35,16") ; table-put
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "36,8,36,31")
           ; !("bla", "key", "value")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "37,8,37,44")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "37,8,37,33")
              ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "37,9,37,17") ; table-get)> ("bla", "key")) => "value"
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "40,6,49,6")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "40,6,43,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "40,21,40,39")
           ; !"legacy table-get"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "41,8,41,16") ; table-get
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "42,8,42,25")
           ; !("blabla", "key")
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "45,6,49,6")
    ; apply-test(
        s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "45,17,45,36")
        ; !"legacy table_keys"
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "46,8,46,17") ; table-keys
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "47,8,47,19")
        ; !"blablabla"
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "48,8,48,10")
        ; ![]
      )
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "legacy-tests", "33,2,49,6")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "legacy-tests", "33,2,49,6")
      ; fail


strategies
  test-create =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-create", "53,2,54,90")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "54,4,54,90")
    ; apply-and-check(
        s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "54,20,54,35")
        ; !"new-hashtable"
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "54,38,54,50") ; new-hashtable
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "54,53,54,55")
        ; !()
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "54,58,54,89")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "54,58,54,70")
           ; ?Hashtable(_))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "54,73,54,89")
        ; hashtable-destroy
      )
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-create", "53,2,54,90")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-create", "53,2,54,90")
      ; fail

  test-put =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-put", "56,2,63,35")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "57,4,63,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "57,4,57,30")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "57,10,57,29")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "57,10,57,22") ; new-hashtable) => tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "58,6,63,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "58,6,62,6")
       ; apply-and-check(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "58,22,58,37")
           ; !"hashtable-put"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "59,8,59,37")
           ; hashtable-put(|"key", "value")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "60,8,60,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "61,8,61,45")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "61,8,61,34")
              ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "61,9,61,29")
                  ; hashtable-get(|"key"))> tbl) => "value"
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "63,6,63,35")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "63,12,63,34")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "63,13,63,29") ; hashtable-destroy)> tbl)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-put", "56,2,63,35")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-put", "56,2,63,35")
      ; fail

  test-get =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-get", "65,2,73,6")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "66,6,73,6")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "66,6,69,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "66,21,66,55")
           ; !"hashtable-get on not a hashtable"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "67,8,67,28")
           ; hashtable-get(|"key")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "68,8,68,10")
           ; !()
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "70,6,73,6")
    ; apply-and-fail(
        s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "70,21,70,55")
        ; !"hashtable-get on not a hashtable"
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "71,8,71,28")
        ; hashtable-get(|"key")
      , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "72,8,72,22")
        ; !Hashtable("1")
      )
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-get", "65,2,73,6")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-get", "65,2,73,6")
      ; fail

  test-remove =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-remove", "75,2,82,35")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "76,4,82,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "76,4,76,30")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "76,10,76,29")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "76,10,76,22") ; new-hashtable) => tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "77,6,82,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "77,6,81,6")
       ; apply-and-check(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "77,22,77,40")
           ; !"hashtable-remove"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "78,8,78,63")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "78,8,78,37")
              ; hashtable-put(|"key", "value"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "78,40,78,63")
           ; hashtable-remove(|"key")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "79,8,79,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "80,8,80,39")
           ; not(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "80,12,80,38")
                 ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "80,13,80,33")
                     ; hashtable-get(|"key"))> tbl)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "82,6,82,35")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "82,12,82,34")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "82,13,82,29") ; hashtable-destroy)> tbl)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-remove", "75,2,82,35")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-remove", "75,2,82,35")
      ; fail

  test-keys =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-keys", "84,2,96,35")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "85,4,96,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "85,4,85,30")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "85,10,85,29")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "85,10,85,22") ; new-hashtable) => tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "86,6,96,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "86,6,90,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "86,17,86,33")
           ; !"hashtable-keys"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "87,8,87,21") ; hashtable-keys
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "88,8,88,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "89,8,89,10")
           ; ![]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "91,6,96,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "91,6,95,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "91,17,91,33")
           ; !"hashtable-keys"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "92,8,92,53")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "92,8,92,37")
              ; hashtable-put(|"key", "value"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "92,40,92,53")
           ; hashtable-keys
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "93,8,93,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "94,8,94,15")
           ; !["key"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "96,6,96,35")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "96,12,96,34")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "96,13,96,29") ; hashtable-destroy)> tbl)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-keys", "84,2,96,35")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-keys", "84,2,96,35")
      ; fail


strategies
  test-fold =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-fold", "104,2,155,6")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "105,4,155,6")
    ; let kv-mul-add(|k, v) =
            s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "kv-mul-add", "105,8,105,53")
            ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "105,28,105,53")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "105,29,105,31") ; add)> ( <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "105,36,105,37") ; id>
                                                                                                            , <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "105,42,105,44") ; mul> (k, v)
                                                                                                            )
            < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "kv-mul-add", "105,8,105,53")
            + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "kv-mul-add", "105,8,105,53")
              ; fail
      in
        s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "108,4,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "108,4,108,30")
           ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "108,10,108,29")
                   ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "108,10,108,22") ; new-hashtable) => tbl))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "110,6,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "110,6,114,6")
           ; apply-test(
               s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "110,17,110,40")
               ; !"hashtable-fold-keys 1"
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "111,8,111,39")
               ; hashtable-fold-keys(
                   s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "111,28,111,34") ; int-add
                 | 0
                 )
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "112,8,112,11") ; !tbl
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "113,8,113,9")
               ; !0
             ))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "116,6,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "116,6,120,6")
           ; apply-test(
               s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "116,17,116,42")
               ; !"hashtable-fold-values 1"
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "117,8,117,41")
               ; hashtable-fold-values(
                   s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "117,30,117,36") ; int-add
                 | 0
                 )
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "118,8,118,11") ; !tbl
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "119,8,119,9")
               ; !0
             ))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "122,6,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "122,6,126,6")
           ; apply-test(
               s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "122,17,122,35")
               ; !"hashtable-fold 1"
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "123,8,123,37")
               ; hashtable-fold(
                   s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "123,23,123,32") ; kv-mul-add
                 | 0
                 )
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "124,8,124,11") ; !tbl
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "125,8,125,9")
               ; !0
             ))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "128,6,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "128,6,133,6")
           ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "129,8,132,29")
                   ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "129,8,129,11") ; !tbl)
                   ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "130,10,132,29")
                   ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "130,10,130,29")
                      ; hashtable-put(|1, 2))
                   ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "131,10,132,29")
                   ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "131,10,131,29")
                      ; hashtable-put(|2, 3))
                   ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "132,10,132,29")
                   ; hashtable-put(|3, 4)))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "135,6,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "135,6,139,6")
           ; apply-test(
               s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "135,17,135,40")
               ; !"hashtable-fold-keys 2"
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "136,8,136,39")
               ; hashtable-fold-keys(
                   s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "136,28,136,34") ; int-add
                 | 0
                 )
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "137,8,137,11") ; !tbl
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "138,8,138,9")
               ; !6
             ))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "141,6,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "141,6,145,6")
           ; apply-test(
               s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "141,17,141,42")
               ; !"hashtable-fold-values 2"
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "142,8,142,41")
               ; hashtable-fold-values(
                   s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "142,30,142,36") ; int-add
                 | 0
                 )
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "143,8,143,11") ; !tbl
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "144,8,144,9")
               ; !9
             ))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "147,6,153,35")
        ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "147,6,151,6")
           ; apply-test(
               s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "147,17,147,35")
               ; !"hashtable-fold 2"
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "148,8,148,37")
               ; hashtable-fold(
                   s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "148,23,148,32") ; kv-mul-add
                 | 0
                 )
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "149,8,149,11") ; !tbl
             , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "150,8,150,10")
               ; !20
             ))
        ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "153,6,153,35")
        ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "153,12,153,34")
                ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "153,13,153,29") ; hashtable-destroy)> tbl)
      end
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-fold", "104,2,155,6")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-fold", "104,2,155,6")
      ; fail


strategies
  test-getlist =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-getlist", "159,2,172,35")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "160,4,172,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "160,4,160,30")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "160,10,160,29")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "160,10,160,22") ; new-hashtable) => tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "161,6,172,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "161,6,165,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "161,17,161,42")
           ; !"hashtable-getlist-empty"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "162,8,162,24") ; hashtable-getlist
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "163,8,163,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "164,8,164,10")
           ; ![]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "166,6,172,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "166,6,166,84")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "166,12,166,83")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "166,12,166,15") ; !tbl)
               ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "166,18,166,83")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "166,18,166,49")
                  ; hashtable-put(|"key1", "value1"))
               ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "166,52,166,83")
               ; hashtable-put(|"key2", "value2")))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "167,6,172,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "167,6,171,6")
       ; apply-and-check(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "167,22,167,41")
           ; !"hashtable-getlist"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "168,8,168,24") ; hashtable-getlist
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "169,8,169,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "170,8,170,64")
           ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "170,9,170,14") ; set-eq)> ( <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "170,19,170,20") ; id>
                                                                                                             , [ ("key1", "value1")
                                                                                                               , ("key2", "value2")
                                                                                                               ]
                                                                                                             )
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "172,6,172,35")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "172,12,172,34")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "172,13,172,29") ; hashtable-destroy)> tbl)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-getlist", "159,2,172,35")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-getlist", "159,2,172,35")
      ; fail

  test-putlist =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-putlist", "174,2,187,35")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "175,4,187,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "175,4,175,30")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "175,10,175,29")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "175,10,175,22") ; new-hashtable) => tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "176,6,187,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "176,6,180,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "176,17,176,42")
           ; !"hashtable-putlist-empty"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "177,8,177,48")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "177,8,177,29")
              ; hashtable-putlist(|[]))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "177,32,177,48")
           ; hashtable-getlist
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "178,8,178,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "179,8,179,10")
           ; ![]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "181,6,187,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "181,6,186,6")
       ; apply-and-check(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "181,22,181,41")
           ; !"hashtable-putlist"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "182,8,183,26")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "182,8,182,67")
              ; hashtable-putlist(
                | [ ("key1", "value1")
                  , ("key2", "value2")
                  ]
                ))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "183,10,183,26")
           ; hashtable-getlist
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "184,8,184,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "185,8,185,64")
           ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "185,9,185,14") ; set-eq)> ( <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "185,19,185,20") ; id>
                                                                                                             , [ ("key1", "value1")
                                                                                                               , ("key2", "value2")
                                                                                                               ]
                                                                                                             )
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "187,6,187,35")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "187,12,187,34")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "187,13,187,29") ; hashtable-destroy)> tbl)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-putlist", "174,2,187,35")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-putlist", "174,2,187,35")
      ; fail

  test-copy =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-copy", "189,2,208,35")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "190,4,208,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "190,4,190,30")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "190,10,190,29")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "190,10,190,22") ; new-hashtable) => tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "191,6,208,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "191,6,198,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "191,17,191,39")
           ; !"hashtable-copy-empty"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "192,8,196,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "192,8,192,36")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "192,14,192,35")
                      ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "192,14,192,27") ; hashtable-copy) => tbl2))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "193,10,196,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "193,10,193,37")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "193,16,193,36")
                      ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "193,17,193,23")
                          ; not(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "193,21,193,22") ; eq))> (tbl, tbl2)))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "194,10,196,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "194,10,194,54")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "194,16,194,53")
                      ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "194,17,194,22") ; set-eq)> ( []
                                                                                                                         , <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "194,31,194,47") ; hashtable-getlist> tbl
                                                                                                                         )))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "195,10,196,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "195,10,195,55")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "195,16,195,54")
                      ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "195,17,195,22") ; set-eq)> ( []
                                                                                                                         , <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "195,31,195,47") ; hashtable-getlist> tbl2
                                                                                                                         )))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "196,10,196,40")
           ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "196,16,196,39")
                   ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "196,17,196,33") ; hashtable-destroy)> tbl2)
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "197,8,197,11") ; !tbl
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "199,6,208,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "199,6,199,78")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "199,12,199,77")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "199,13,199,72")
                   ; hashtable-putlist(
                     | [ ("key1", "value1")
                       , ("key2", "value2")
                       ]
                     ))> tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "200,6,208,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "200,6,207,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "200,17,200,33")
           ; !"hashtable-copy"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "201,8,205,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "201,8,201,36")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "201,14,201,35")
                      ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "201,14,201,27") ; hashtable-copy) => tbl3))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "202,10,205,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "202,10,202,37")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "202,16,202,36")
                      ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "202,17,202,23")
                          ; not(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "202,21,202,22") ; eq))> (tbl, tbl3)))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "203,10,205,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "203,10,203,93")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "203,16,203,92")
                      ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "203,17,203,22") ; set-eq)> ( <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "203,27,203,43") ; hashtable-getlist> tbl
                                                                                                                         , [ ("key1", "value1")
                                                                                                                           , ("key2", "value2")
                                                                                                                           ]
                                                                                                                         )))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "204,10,205,40")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "204,10,204,93")
              ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "204,16,204,92")
                      ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "204,17,204,22") ; set-eq)> ( <s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "204,27,204,43") ; hashtable-getlist> tbl3
                                                                                                                         , [ ("key1", "value1")
                                                                                                                           , ("key2", "value2")
                                                                                                                           ]
                                                                                                                         )))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "205,10,205,40")
           ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "205,16,205,39")
                   ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "205,17,205,33") ; hashtable-destroy)> tbl3)
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "206,8,206,11") ; !tbl
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "208,6,208,35")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "208,12,208,34")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "208,13,208,29") ; hashtable-destroy)> tbl)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-copy", "189,2,208,35")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-copy", "189,2,208,35")
      ; fail

  test-stack =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-stack", "210,2,254,35")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "211,4,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "211,4,211,30")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "211,10,211,29")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "211,10,211,22") ; new-hashtable) => tbl))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "212,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "212,6,219,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "212,17,212,33")
           ; !"hashtable-push"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "213,8,216,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "213,8,213,40")
              ; hashtable-push(|"keyA", "value1"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "214,10,216,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "214,10,214,42")
              ; hashtable-push(|"keyA", "value2"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "215,10,216,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "215,10,215,42")
              ; hashtable-push(|"keyA", "value3"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "216,10,216,42")
           ; hashtable-push(|"keyB", "value4")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "217,8,217,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "218,8,218,11") ; !tbl
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "220,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "220,6,223,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "220,21,220,50")
           ; !"hashtable-peek-invalidstack"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "221,8,221,30")
           ; hashtable-peek(|"keyZ")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "222,8,222,11") ; !tbl
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "224,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "224,6,228,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "224,17,224,33")
           ; !"hashtable-peek"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "225,8,225,30")
           ; hashtable-peek(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "226,8,226,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "227,8,227,16")
           ; !"value3"
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "229,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "229,6,233,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "229,17,229,39")
           ; !"hashtable-peek-again"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "230,8,230,30")
           ; hashtable-peek(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "231,8,231,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "232,8,232,16")
           ; !"value3"
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "234,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "234,6,238,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "234,17,234,43")
           ; !"hashtable-peek-singleton"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "235,8,235,30")
           ; hashtable-peek(|"keyB")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "236,8,236,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "237,8,237,16")
           ; !"value4"
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "239,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "239,6,244,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "239,17,239,32")
           ; !"hashtable-pop"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "240,8,241,31")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "240,8,240,29")
              ; hashtable-pop(|"keyA"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "241,10,241,31")
           ; hashtable-pop(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "242,8,242,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "243,8,243,11") ; !tbl
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "245,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "245,6,249,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "245,17,245,36")
           ; !"hashtable-peekpop"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "246,8,246,33")
           ; hashtable-peekpop(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "247,8,247,11") ; !tbl
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "248,8,248,16")
           ; !"value1"
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "250,6,254,35")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "250,6,253,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "250,21,250,42")
           ; !"hashtable-pop-empty"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "251,8,251,29")
           ; hashtable-pop(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "252,8,252,11") ; !tbl
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "254,6,254,35")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "254,12,254,34")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "254,13,254,29") ; hashtable-destroy)> tbl)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-stack", "210,2,254,35")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-stack", "210,2,254,35")
      ; fail

  test-intersect =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-intersect", "256,2,322,36")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "257,4,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "257,4,257,31")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "257,10,257,30")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "257,10,257,22") ; new-hashtable) => tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "258,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "258,6,258,33")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "258,12,258,32")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "258,12,258,24") ; new-hashtable) => tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "259,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "259,6,266,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "259,17,259,45")
           ; !"hashtable-intersect setup1"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "260,8,263,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "260,8,260,40")
              ; hashtable-push(|"keyA", "value1"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "261,10,263,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "261,10,261,42")
              ; hashtable-push(|"keyA", "value2"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "262,10,263,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "262,10,262,42")
              ; hashtable-push(|"keyA", "value3"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "263,10,263,42")
           ; hashtable-push(|"keyB", "value4")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "264,8,264,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "265,8,265,12") ; !tbl1
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "267,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "267,6,274,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "267,17,267,45")
           ; !"hashtable-intersect setup2"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "268,8,271,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "268,8,268,40")
              ; hashtable-push(|"keyA", "value1"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "269,10,271,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "269,10,269,42")
              ; hashtable-push(|"keyA", "value4"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "270,10,271,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "270,10,270,42")
              ; hashtable-push(|"keyA", "value5"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "271,10,271,42")
           ; hashtable-push(|"keyC", "value6")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "272,8,272,12") ; !tbl2
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "273,8,273,12") ; !tbl2
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "275,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "275,6,279,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "275,17,275,50")
           ; !"hashtable-intersect test-tbl1 A"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "276,8,276,29")
           ; hashtable-get(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "277,8,277,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "278,8,278,38")
           ; !["value3", "value2", "value1"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "280,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "280,6,284,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "280,17,280,50")
           ; !"hashtable-intersect test-tbl1 B"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "281,8,281,29")
           ; hashtable-get(|"keyB")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "282,8,282,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "283,8,283,18")
           ; !["value4"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "285,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "285,6,289,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "285,17,285,50")
           ; !"hashtable-intersect test-tbl2 A"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "286,8,286,29")
           ; hashtable-get(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "287,8,287,12") ; !tbl2
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "288,8,288,38")
           ; !["value5", "value4", "value1"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "290,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "290,6,293,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "290,21,290,54")
           ; !"hashtable-intersect test-tbl2 B"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "291,8,291,29")
           ; hashtable-get(|"keyB")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "292,8,292,12") ; !tbl2
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "294,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "294,6,298,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "294,17,294,50")
           ; !"hashtable-intersect test-tbl2 C"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "295,8,295,29")
           ; hashtable-get(|"keyC")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "296,8,296,12") ; !tbl2
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "297,8,297,18")
           ; !["value6"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "300,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "300,6,304,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "300,17,300,38")
           ; !"hashtable-intersect"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "301,8,301,44")
           ; hashtable-intersect-wempty(|tbl2, [])
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "302,8,302,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "303,8,303,12") ; !tbl1
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "306,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "306,6,310,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "306,17,306,50")
           ; !"hashtable-intersect test-tbl1 A"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "307,8,307,29")
           ; hashtable-get(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "308,8,308,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "309,8,309,18")
           ; !["value1"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "311,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "311,6,315,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "311,17,311,50")
           ; !"hashtable-intersect test-tbl1 B"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "312,8,312,29")
           ; hashtable-get(|"keyB")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "313,8,313,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "314,8,314,10")
           ; ![]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "316,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "316,6,320,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "316,17,316,50")
           ; !"hashtable-intersect test-tbl1 C"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "317,8,317,29")
           ; hashtable-get(|"keyC")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "318,8,318,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "319,8,319,10")
           ; ![]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "321,6,322,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "321,6,321,36")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "321,12,321,35")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "321,13,321,29") ; hashtable-destroy)> tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "322,6,322,36")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "322,12,322,35")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "322,13,322,29") ; hashtable-destroy)> tbl2)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-intersect", "256,2,322,36")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-intersect", "256,2,322,36")
      ; fail

  test-union =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-union", "324,2,390,36")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "325,4,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "325,4,325,31")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "325,10,325,30")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "325,10,325,22") ; new-hashtable) => tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "326,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "326,6,326,33")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "326,12,326,32")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "326,12,326,24") ; new-hashtable) => tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "327,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "327,6,334,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "327,17,327,41")
           ; !"hashtable-union setup1"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "328,8,331,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "328,8,328,40")
              ; hashtable-push(|"keyA", "value1"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "329,10,331,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "329,10,329,42")
              ; hashtable-push(|"keyA", "value2"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "330,10,331,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "330,10,330,42")
              ; hashtable-push(|"keyA", "value3"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "331,10,331,42")
           ; hashtable-push(|"keyB", "value4")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "332,8,332,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "333,8,333,12") ; !tbl1
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "335,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "335,6,342,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "335,17,335,41")
           ; !"hashtable-union setup2"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "336,8,339,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "336,8,336,40")
              ; hashtable-push(|"keyA", "value1"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "337,10,339,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "337,10,337,42")
              ; hashtable-push(|"keyA", "value4"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "338,10,339,42")
           ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "338,10,338,42")
              ; hashtable-push(|"keyA", "value5"))
           ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "339,10,339,42")
           ; hashtable-push(|"keyC", "value6")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "340,8,340,12") ; !tbl2
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "341,8,341,12") ; !tbl2
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "343,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "343,6,347,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "343,17,343,46")
           ; !"hashtable-union test-tbl1 A"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "344,8,344,29")
           ; hashtable-get(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "345,8,345,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "346,8,346,38")
           ; !["value3", "value2", "value1"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "348,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "348,6,352,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "348,17,348,46")
           ; !"hashtable-union test-tbl1 B"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "349,8,349,29")
           ; hashtable-get(|"keyB")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "350,8,350,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "351,8,351,18")
           ; !["value4"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "353,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "353,6,357,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "353,17,353,46")
           ; !"hashtable-union test-tbl2 A"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "354,8,354,29")
           ; hashtable-get(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "355,8,355,12") ; !tbl2
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "356,8,356,38")
           ; !["value5", "value4", "value1"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "358,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "358,6,361,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "358,21,358,50")
           ; !"hashtable-union test-tbl2 B"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "359,8,359,29")
           ; hashtable-get(|"keyB")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "360,8,360,12") ; !tbl2
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "362,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "362,6,366,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "362,17,362,46")
           ; !"hashtable-union test-tbl2 C"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "363,8,363,29")
           ; hashtable-get(|"keyC")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "364,8,364,12") ; !tbl2
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "365,8,365,18")
           ; !["value6"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "368,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "368,6,372,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "368,17,368,34")
           ; !"hashtable-union"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "369,8,369,29")
           ; hashtable-union(|tbl2)
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "370,8,370,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "371,8,371,12") ; !tbl1
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "374,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "374,6,378,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "374,17,374,46")
           ; !"hashtable-union test-tbl1 A"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "375,8,375,29")
           ; hashtable-get(|"keyA")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "376,8,376,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "377,8,377,54")
           ; ![ "value3"
              , "value2"
              , "value5"
              , "value4"
              , "value1"
              ]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "379,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "379,6,383,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "379,17,379,46")
           ; !"hashtable-union test-tbl1 B"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "380,8,380,29")
           ; hashtable-get(|"keyB")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "381,8,381,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "382,8,382,18")
           ; !["value4"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "384,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "384,6,388,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "384,17,384,46")
           ; !"hashtable-union test-tbl1 C"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "385,8,385,29")
           ; hashtable-get(|"keyC")
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "386,8,386,12") ; !tbl1
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "387,8,387,18")
           ; !["value6"]
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "389,6,390,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "389,6,389,36")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "389,12,389,35")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "389,13,389,29") ; hashtable-destroy)> tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "390,6,390,36")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "390,12,390,35")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "390,13,390,29") ; hashtable-destroy)> tbl2)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-union", "324,2,390,36")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-union", "324,2,390,36")
      ; fail

  test-eq =
    s-enter(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-eq", "392,2,434,36")
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "393,4,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "393,4,393,31")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "393,10,393,30")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "393,10,393,22") ; new-hashtable) => tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "394,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "394,6,394,33")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "394,12,394,32")
               ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "394,12,394,24") ; new-hashtable) => tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "395,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "395,6,398,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "395,17,395,42")
           ; !"hashtable-eq both-empty"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "396,8,396,19") ; hashtable-eq
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "397,8,397,20")
           ; !(tbl1, tbl2)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "399,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "399,6,399,51")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "399,12,399,50")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "399,13,399,44")
                   ; hashtable-put(|"KeyA", "ValueA"))> tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "400,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "400,6,403,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "400,21,400,45")
           ; !"hashtable-eq 1st empty"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "401,8,401,19") ; hashtable-eq
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "402,8,402,20")
           ; !(tbl1, tbl2)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "404,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "404,6,404,44")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "404,12,404,43")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "404,13,404,37")
                   ; hashtable-remove(|"KeyA"))> tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "405,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "405,6,405,51")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "405,12,405,50")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "405,13,405,44")
                   ; hashtable-put(|"KeyA", "ValueA"))> tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "406,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "406,6,409,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "406,21,406,45")
           ; !"hashtable-eq 2nd empty"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "407,8,407,19") ; hashtable-eq
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "408,8,408,20")
           ; !(tbl1, tbl2)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "410,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "410,6,410,51")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "410,12,410,50")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "410,13,410,44")
                   ; hashtable-put(|"KeyA", "ValueA"))> tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "411,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "411,6,414,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "411,17,411,42")
           ; !"hashtable-eq singletons"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "412,8,412,19") ; hashtable-eq
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "413,8,413,20")
           ; !(tbl1, tbl2)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "415,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "415,6,415,51")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "415,12,415,50")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "415,13,415,44")
                   ; hashtable-put(|"KeyB", "ValueB"))> tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "416,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "416,6,416,51")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "416,12,416,50")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "416,13,416,44")
                   ; hashtable-put(|"KeyC", "ValueC"))> tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "417,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "417,6,420,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "417,21,417,48")
           ; !"hashtable-eq keys inequal"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "418,8,418,19") ; hashtable-eq
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "419,8,419,20")
           ; !(tbl1, tbl2)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "421,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "421,6,421,52")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "421,12,421,51")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "421,13,421,45")
                   ; hashtable-put(|"KeyC", "ValueC'"))> tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "422,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "422,6,422,52")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "422,12,422,51")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "422,13,422,45")
                   ; hashtable-put(|"KeyB", "ValueB'"))> tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "423,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "423,6,426,6")
       ; apply-and-fail(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "423,21,423,50")
           ; !"hashtable-eq values inequal"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "424,8,424,19") ; hashtable-eq
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "425,8,425,20")
           ; !(tbl1, tbl2)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "427,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "427,6,427,51")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "427,12,427,50")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "427,13,427,44")
                   ; hashtable-put(|"KeyC", "ValueC"))> tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "428,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "428,6,428,51")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "428,12,428,50")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "428,13,428,44")
                   ; hashtable-put(|"KeyB", "ValueB"))> tbl2))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "429,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "429,6,432,6")
       ; apply-test(
           s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "429,17,429,37")
           ; !"hashtable-eq equal"
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "430,8,430,19") ; hashtable-eq
         , s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "431,8,431,20")
           ; !(tbl1, tbl2)
         ))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "433,6,434,36")
    ; (s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "433,6,433,36")
       ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "433,12,433,35")
               ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "433,13,433,29") ; hashtable-destroy)> tbl1))
    ; s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "434,6,434,36")
    ; where(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "434,12,434,35")
            ; <(s-step(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "434,13,434,29") ; hashtable-destroy)> tbl2)
    < s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-eq", "392,2,434,36")
    + s-exit(|"strategoxt/stratego-libraries/lib/tests/tables-test.str", "test-eq", "392,2,434,36")
      ; fail