module til-typestate

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  til-opt-lib
  til-desugar


signature
  constructors
    TypeState : Property -> TypeState
    UnInit    : Property
    Init      : Property
    Dunno     : Property


strategies
  io-til-typestate =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "io-til-typestate"
    , "13"
    , "2"
    , "14"
    , "29"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "14"
      , "4"
      , "14"
      , "29"
      )
    ; io-wrap(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "14"
        , "12"
        , "14"
        , "28"
        )
        ; typestate-program
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "io-til-typestate"
      , "13"
      , "2"
      , "14"
      , "29"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "io-til-typestate"
      , "13"
      , "2"
      , "14"
      , "29"
      )
      ; fail

  typestate-program =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-program"
    , "16"
    , "2"
    , "17"
    , "27"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "17"
      , "4"
      , "17"
      , "27"
      )
    ; Program(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "17"
        , "12"
        , "17"
        , "26"
        )
        ; typestate-stats
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-program"
      , "16"
      , "2"
      , "17"
      , "27"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-program"
      , "16"
      , "2"
      , "17"
      , "27"
      )
      ; fail

  typestate =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate"
    , "19"
    , "2"
    , "26"
    , "40"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "20"
      , "4"
      , "26"
      , "40"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "20"
       , "4"
       , "20"
       , "24"
       )
       ; typestate-declaration
       <+ s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
          , "21"
          , "7"
          , "26"
          , "40"
          )
          ; (s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "21"
             , "7"
             , "21"
             , "22"
             )
             ; typestate-assign
             <+ s-step(
                | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                , "22"
                , "7"
                , "26"
                , "40"
                )
                ; (s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                   , "22"
                   , "7"
                   , "22"
                   , "21"
                   )
                   ; typestate-block
                   <+ s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "23"
                      , "7"
                      , "26"
                      , "40"
                      )
                      ; (s-step(
                         | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                         , "23"
                         , "7"
                         , "23"
                         , "18"
                         )
                         ; typestate-if
                         <+ s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "24"
                            , "7"
                            , "26"
                            , "40"
                            )
                            ; (s-step(
                               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                               , "24"
                               , "7"
                               , "24"
                               , "21"
                               )
                               ; typestate-while
                               <+ s-step(
                                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                  , "25"
                                  , "7"
                                  , "26"
                                  , "40"
                                  )
                                  ; (s-step(
                                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                     , "25"
                                     , "7"
                                     , "25"
                                     , "19"
                                     )
                                     ; typestate-for
                                     <+ s-step(
                                        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                        , "26"
                                        , "7"
                                        , "26"
                                        , "40"
                                        )
                                        ; (s-step(
                                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                           , "26"
                                           , "7"
                                           , "26"
                                           , "20"
                                           )
                                           ; all(s-step(
                                                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                                 , "26"
                                                 , "11"
                                                 , "26"
                                                 , "19"
                                                 )
                                                 ; typestate))
                                        ; s-step(
                                          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                          , "26"
                                          , "23"
                                          , "26"
                                          , "40"
                                          )
                                        ; try(
                                            s-step(
                                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                            , "26"
                                            , "27"
                                            , "26"
                                            , "39"
                                            )
                                            ; typestate-exp
                                          )))))))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate"
      , "19"
      , "2"
      , "26"
      , "40"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate"
      , "19"
      , "2"
      , "26"
      , "40"
      )
      ; fail

  typestate-block =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-block"
    , "28"
    , "2"
    , "29"
    , "25"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "29"
      , "4"
      , "29"
      , "25"
      )
    ; Block(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "29"
        , "10"
        , "29"
        , "24"
        )
        ; typestate-stats
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-block"
      , "28"
      , "2"
      , "29"
      , "25"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-block"
      , "28"
      , "2"
      , "29"
      , "25"
      )
      ; fail

  typestate-stats =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-stats"
    , "31"
    , "2"
    , "32"
    , "37"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "32"
      , "4"
      , "32"
      , "37"
      )
    ; {|TypestateOf:
         s-step(
         | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
         , "32"
         , "21"
         , "32"
         , "34"
         )
         ; map(
             s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "32"
             , "25"
             , "32"
             , "33"
             )
             ; typestate
           )
      |}
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-stats"
      , "31"
      , "2"
      , "32"
      , "37"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-stats"
      , "31"
      , "2"
      , "32"
      , "37"
      )
      ; fail

  typestate-declaration =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-declaration"
    , "34"
    , "2"
    , "36"
    , "43"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "35"
      , "4"
      , "36"
      , "43"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "35"
       , "5"
       , "35"
       , "46"
       )
       ; (s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
          , "35"
          , "5"
          , "35"
          , "19"
          )
          ; ?Declaration(x)
          <+ s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "35"
             , "24"
             , "35"
             , "46"
             )
             ; ?DeclarationTyped(x, t)))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "36"
      , "6"
      , "36"
      , "43"
      )
    ; rules ( TypestateOf+x :
                x -> UnInit() )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-declaration"
      , "34"
      , "2"
      , "36"
      , "43"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-declaration"
      , "34"
      , "2"
      , "36"
      , "43"
      )
      ; fail

  typestate-assign =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-assign"
    , "38"
    , "2"
    , "41"
    , "41"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "39"
      , "4"
      , "41"
      , "41"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "39"
       , "4"
       , "39"
       , "29"
       )
       ; Assign(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "39"
           , "11"
           , "39"
           , "12"
           )
           ; ?x
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "39"
           , "15"
           , "39"
           , "28"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "39"
              , "15"
              , "39"
              , "23"
              )
              ; typestate) => e
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "40"
      , "6"
      , "41"
      , "41"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "40"
       , "6"
       , "40"
       , "36"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "40"
               , "13"
               , "40"
               , "34"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                  , "40"
                  , "13"
                  , "40"
                  , "28"
                  )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "40"
                      , "14"
                      , "40"
                      , "25"
                      )
                      ; typestate-of)> e) => ts))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "41"
      , "6"
      , "41"
      , "41"
      )
    ; rules ( TypestateOf.x :
                x -> Init() )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-assign"
      , "38"
      , "2"
      , "41"
      , "41"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-assign"
      , "38"
      , "2"
      , "41"
      , "41"
      )
      ; fail

  typestate-if =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-if"
    , "43"
    , "2"
    , "45"
    , "86"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "44"
      , "4"
      , "45"
      , "86"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "44"
       , "4"
       , "44"
       , "28"
       )
       ; IfElse(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "44"
           , "11"
           , "44"
           , "19"
           )
           ; typestate
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "44"
           , "22"
           , "44"
           , "23"
           )
           ; id
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "44"
           , "26"
           , "44"
           , "27"
           )
           ; id
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "45"
      , "6"
      , "45"
      , "86"
      )
    ; merge-TypestateOf(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "45"
        , "24"
        , "45"
        , "54"
        )
        ; IfElse(
            s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "45"
            , "31"
            , "45"
            , "32"
            )
            ; id
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "45"
            , "35"
            , "45"
            , "49"
            )
            ; typestate-stats
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "45"
            , "52"
            , "45"
            , "53"
            )
            ; id
          )
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "45"
        , "57"
        , "45"
        , "85"
        )
        ; IfElse(
            s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "45"
            , "64"
            , "45"
            , "65"
            )
            ; id
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "45"
            , "67"
            , "45"
            , "68"
            )
            ; id
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "45"
            , "70"
            , "45"
            , "84"
            )
            ; typestate-stats
          )
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-if"
      , "43"
      , "2"
      , "45"
      , "86"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-if"
      , "43"
      , "2"
      , "45"
      , "86"
      )
      ; fail

  typestate-while =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-while"
    , "47"
    , "2"
    , "49"
    , "61"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "48"
      , "4"
      , "49"
      , "61"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "48"
       , "4"
       , "48"
       , "15"
       )
       ; ?While(_, _))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "49"
      , "6"
      , "49"
      , "61"
      )
    ; merge-TypestateOf(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "49"
        , "24"
        , "49"
        , "25"
        )
        ; id
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "49"
        , "28"
        , "49"
        , "60"
        )
        ; While(
            s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "49"
            , "34"
            , "49"
            , "42"
            )
            ; typestate
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "49"
            , "45"
            , "49"
            , "59"
            )
            ; typestate-stats
          )
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-while"
      , "47"
      , "2"
      , "49"
      , "61"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-while"
      , "47"
      , "2"
      , "49"
      , "61"
      )
      ; fail

  typestate-for =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-for"
    , "51"
    , "2"
    , "54"
    , "57"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "52"
      , "4"
      , "54"
      , "57"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "52"
       , "4"
       , "52"
       , "36"
       )
       ; For(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "52"
           , "8"
           , "52"
           , "9"
           )
           ; ?x
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "52"
           , "12"
           , "52"
           , "20"
           )
           ; typestate
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "52"
           , "23"
           , "52"
           , "31"
           )
           ; typestate
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "52"
           , "34"
           , "52"
           , "35"
           )
           ; id
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "53"
      , "6"
      , "54"
      , "57"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "53"
       , "6"
       , "53"
       , "41"
       )
       ; rules ( TypestateOf.x :
                   x -> Init() ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "54"
      , "6"
      , "54"
      , "57"
      )
    ; merge-TypestateOf(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "54"
        , "24"
        , "54"
        , "25"
        )
        ; id
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "54"
        , "28"
        , "54"
        , "56"
        )
        ; For(
            s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "54"
            , "32"
            , "54"
            , "33"
            )
            ; id
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "54"
            , "35"
            , "54"
            , "36"
            )
            ; id
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "54"
            , "38"
            , "54"
            , "39"
            )
            ; id
          , s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "54"
            , "41"
            , "54"
            , "55"
            )
            ; typestate-stats
          )
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-for"
      , "51"
      , "2"
      , "54"
      , "57"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-for"
      , "51"
      , "2"
      , "54"
      , "57"
      )
      ; fail

  typestate-exp =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "typestate-exp"
    , "56"
    , "2"
    , "61"
    , "22"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "57"
      , "4"
      , "61"
      , "22"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "57"
       , "4"
       , "57"
       , "15"
       )
       ; TypestateVar
       <+ s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
          , "58"
          , "7"
          , "61"
          , "22"
          )
          ; (s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "58"
             , "7"
             , "58"
             , "18"
             )
             ; TypestateInt
             <+ s-step(
                | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                , "59"
                , "7"
                , "61"
                , "22"
                )
                ; (s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                   , "59"
                   , "7"
                   , "59"
                   , "21"
                   )
                   ; TypestateString
                   <+ s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "60"
                      , "7"
                      , "61"
                      , "22"
                      )
                      ; (s-step(
                         | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                         , "60"
                         , "7"
                         , "60"
                         , "54"
                         )
                         ; (s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "60"
                            , "7"
                            , "60"
                            , "20"
                            )
                            ; BinOpToFunCall)
                         ; s-step(
                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                           , "60"
                           , "23"
                           , "60"
                           , "54"
                           )
                         ; (s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "60"
                            , "23"
                            , "60"
                            , "38"
                            )
                            ; TypestateFunCall)
                         ; s-step(
                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                           , "60"
                           , "41"
                           , "60"
                           , "54"
                           )
                         ; FunCallToBinOp
                         <+ s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "61"
                            , "7"
                            , "61"
                            , "22"
                            )
                            ; TypestateFunCall))))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-exp"
      , "56"
      , "2"
      , "61"
      , "22"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "typestate-exp"
      , "56"
      , "2"
      , "61"
      , "22"
      )
      ; fail


rules

  typestate-of :
    e{t*} -> <r-exit(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "typestate-of"
              , "65"
              , "2"
              , "67"
              , "48"
              )> ts
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "typestate-of", "65,2,67,48")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-of"
             , "65"
             , "2"
             , "67"
             , "48"
             )
             ; fail
    where s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
          , "67"
          , "10"
          , "67"
          , "48"
          )
          ; (s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "67"
             , "10"
             , "67"
             , "42"
             )
             ; <(s-step(
                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                 , "67"
                 , "11"
                 , "67"
                 , "38"
                 )
                 ; fetch-elem(
                     s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "67"
                     , "22"
                     , "67"
                     , "37"
                     )
                     ; ?TypeState(
                          <s-step(
                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                           , "67"
                           , "34"
                           , "67"
                           , "35"
                           )
                           ; id>
                        )
                   ))> t*) => ts
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-of"
             , "65"
             , "2"
             , "67"
             , "48"
             )
             ; fail


rules

  TypestateVar :
    Var(x){t*} -> <r-exit(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                   , "TypestateVar"
                   , "71"
                   , "2"
                   , "73"
                   , "30"
                   )> Var(x){TypeState(ts), t*}
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "TypestateVar", "71,2,73,30")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "TypestateVar"
             , "71"
             , "2"
             , "73"
             , "30"
             )
             ; fail
    where s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
          , "73"
          , "10"
          , "73"
          , "30"
          )
          ; (s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "73"
             , "10"
             , "73"
             , "24"
             )
             ; <(s-step(
                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                 , "73"
                 , "11"
                 , "73"
                 , "21"
                 )
                 ; TypestateOf)> x) => ts
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "TypestateVar"
             , "71"
             , "2"
             , "73"
             , "30"
             )
             ; fail

  TypestateInt :
    Int(i){t*} -> <r-exit(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                   , "TypestateInt"
                   , "75"
                   , "2"
                   , "76"
                   , "46"
                   )> Int(i){TypeState(Init()), t*}
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "TypestateInt", "75,2,76,46")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "TypestateInt"
             , "75"
             , "2"
             , "76"
             , "46"
             )
             ; fail

  TypestateString :
    String(x){t*} -> <r-exit(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "TypestateString"
                      , "78"
                      , "2"
                      , "79"
                      , "52"
                      )> String(x){TypeState(Init()), t*}
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "TypestateString", "78,2,79,52")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "TypestateString"
             , "78"
             , "2"
             , "79"
             , "52"
             )
             ; fail

  TypestateFunCall :
    FunCall(f, e*){t*} -> <r-exit(
                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                           , "TypestateFunCall"
                           , "81"
                           , "2"
                           , "83"
                           , "67"
                           )> FunCall(f, e*){TypeState(ts), t*}
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "TypestateFunCall", "81,2,83,67")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "TypestateFunCall"
             , "81"
             , "2"
             , "83"
             , "67"
             )
             ; fail
    where s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
          , "83"
          , "10"
          , "83"
          , "67"
          )
          ; (s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "83"
             , "10"
             , "83"
             , "61"
             )
             ; <(s-step(
                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                 , "83"
                 , "11"
                 , "83"
                 , "57"
                 )
                 ; foldr(
                     s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "83"
                     , "17"
                     , "83"
                     , "23"
                     )
                     ; !Init()
                   , s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "83"
                     , "26"
                     , "83"
                     , "42"
                     )
                     ; typestate-combine
                   , s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "83"
                     , "45"
                     , "83"
                     , "56"
                     )
                     ; typestate-of
                   ))> e*) => ts
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "TypestateFunCall"
             , "81"
             , "2"
             , "83"
             , "67"
             )
             ; fail

  typestate-combine :
    (UnInit(), UnInit()) -> <r-exit(
                             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                             , "typestate-combine"
                             , "85"
                             , "2"
                             , "85"
                             , "53"
                             )> UnInit()
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "typestate-combine", "85,2,85,53")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-combine"
             , "85"
             , "2"
             , "85"
             , "53"
             )
             ; fail

  typestate-combine :
    (Init(), Init()) -> <r-exit(
                         | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                         , "typestate-combine"
                         , "86"
                         , "2"
                         , "86"
                         , "51"
                         )> Init()
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "typestate-combine", "86,2,86,51")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-combine"
             , "86"
             , "2"
             , "86"
             , "51"
             )
             ; fail

  typestate-combine :
    (Init(), UnInit()) -> <r-exit(
                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                           , "typestate-combine"
                           , "87"
                           , "2"
                           , "87"
                           , "52"
                           )> Dunno()
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "typestate-combine", "87,2,87,52")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-combine"
             , "87"
             , "2"
             , "87"
             , "52"
             )
             ; fail

  typestate-combine :
    (UnInit(), Init()) -> <r-exit(
                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                           , "typestate-combine"
                           , "88"
                           , "2"
                           , "88"
                           , "52"
                           )> Dunno()
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "typestate-combine", "88,2,88,52")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-combine"
             , "88"
             , "2"
             , "88"
             , "52"
             )
             ; fail

  typestate-combine :
    (Dunno(), _) -> <r-exit(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "typestate-combine"
                     , "89"
                     , "2"
                     , "89"
                     , "52"
                     )> Dunno()
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "typestate-combine", "89,2,89,52")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-combine"
             , "89"
             , "2"
             , "89"
             , "52"
             )
             ; fail

  typestate-combine :
    (_, Dunno()) -> <r-exit(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "typestate-combine"
                     , "90"
                     , "2"
                     , "90"
                     , "52"
                     )> Dunno()
    where r-enter(|"strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str", "typestate-combine", "90,2,90,52")
          <+ r-exit(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
             , "typestate-combine"
             , "90"
             , "2"
             , "90"
             , "52"
             )
             ; fail


strategies
  merge-TypestateOf(s1, s2) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "merge-TypestateOf"
    , "94"
    , "2"
    , "95"
    , "120"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "95"
      , "4"
      , "95"
      , "120"
      )
    ; dr-symbolic-merge(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "95"
        , "22"
        , "95"
        , "38"
        )
        ; typestate-combine
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "95"
        , "41"
        , "95"
        , "51"
        )
        ; TypestateOf
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "95"
        , "54"
        , "95"
        , "76"
        )
        ; aux-TypestateOf(|(), ())
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "95"
        , "79"
        , "95"
        , "95"
        )
        ; redef-TypestateOf
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "95"
        , "98"
        , "95"
        , "99"
        )
        ; s1
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "95"
        , "102"
        , "95"
        , "103"
        )
        ; s2
      | "TypestateOf"
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "merge-TypestateOf"
      , "94"
      , "2"
      , "95"
      , "120"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "merge-TypestateOf"
      , "94"
      , "2"
      , "95"
      , "120"
      )
      ; fail

  redef-TypestateOf =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "redef-TypestateOf"
    , "97"
    , "2"
    , "98"
    , "43"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "98"
      , "4"
      , "98"
      , "43"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "98"
       , "4"
       , "98"
       , "10"
       )
       ; ?(x, o))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "98"
      , "13"
      , "98"
      , "43"
      )
    ; rules ( TypestateOf.x :
                x -> o )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "redef-TypestateOf"
      , "97"
      , "2"
      , "98"
      , "43"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "redef-TypestateOf"
      , "97"
      , "2"
      , "98"
      , "43"
      )
      ; fail


strategies
  dr-print-rule-set(|m, r) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "dr-print-rule-set"
    , "102"
    , "2"
    , "104"
    , "26"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "103"
      , "4"
      , "104"
      , "26"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "103"
       , "4"
       , "103"
       , "12"
       )
       ; debug(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "103"
           , "10"
           , "103"
           , "11"
           )
           ; !m
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "104"
      , "6"
      , "104"
      , "26"
      )
    ; dr-print-rule-set(|r)
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-print-rule-set"
      , "102"
      , "2"
      , "104"
      , "26"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-print-rule-set"
      , "102"
      , "2"
      , "104"
      , "26"
      )
      ; fail

  dr-symbolic-merge(merge, call, aux, redef, s1, s2|R) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "dr-symbolic-merge"
    , "108"
    , "2"
    , "120"
    , "65"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "109"
      , "4"
      , "120"
      , "65"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "109"
       , "4"
       , "112"
       , "4"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "110"
               , "6"
               , "111"
               , "30"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                  , "110"
                  , "6"
                  , "110"
                  , "31"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "110"
                     , "6"
                     , "110"
                     , "24"
                     )
                     ; dr-get-rule-set(|R)) => rs2)
               ; s-step(
                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                 , "111"
                 , "8"
                 , "111"
                 , "30"
                 )
               ; dr-start-change-set(|R)))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "113"
      , "6"
      , "120"
      , "65"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "113"
       , "6"
       , "113"
       , "7"
       )
       ; s1)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "114"
      , "6"
      , "120"
      , "65"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "114"
       , "6"
       , "118"
       , "6"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "115"
               , "8"
               , "117"
               , "32"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                  , "115"
                  , "8"
                  , "115"
                  , "33"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "115"
                     , "8"
                     , "115"
                     , "26"
                     )
                     ; dr-get-rule-set(|R)) => rs1)
               ; s-step(
                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                 , "116"
                 , "10"
                 , "117"
                 , "32"
                 )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                  , "116"
                  , "10"
                  , "116"
                  , "34"
                  )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "116"
                      , "11"
                      , "116"
                      , "29"
                      )
                      ; dr-set-rule-set(|R))> rs2)
               ; s-step(
                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                 , "117"
                 , "10"
                 , "117"
                 , "32"
                 )
               ; dr-start-change-set(|R)))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "119"
      , "6"
      , "120"
      , "65"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "119"
       , "6"
       , "119"
       , "7"
       )
       ; s2)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "120"
      , "6"
      , "120"
      , "65"
      )
    ; dr-symbolic-merge-rulesets(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "120"
        , "33"
        , "120"
        , "37"
        )
        ; merge
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "120"
        , "40"
        , "120"
        , "43"
        )
        ; call
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "120"
        , "46"
        , "120"
        , "48"
        )
        ; aux
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
        , "120"
        , "51"
        , "120"
        , "55"
        )
        ; redef
      | rs1
      , R
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-symbolic-merge"
      , "108"
      , "2"
      , "120"
      , "65"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-symbolic-merge"
      , "108"
      , "2"
      , "120"
      , "65"
      )
      ; fail

  dr-symbolic-merge-rulesets(merge, call, aux, redef|rs1, R) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "dr-symbolic-merge-rulesets"
    , "123"
    , "2"
    , "132"
    , "4"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "124"
      , "4"
      , "132"
      , "4"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
            , "125"
            , "6"
            , "131"
            , "31"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "125"
               , "6"
               , "125"
               , "36"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                  , "125"
                  , "6"
                  , "125"
                  , "9"
                  )
                  ; !rs1) => [ChangeSet(
                                _
                              , _
                              , <s-step(
                                 | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                 , "125"
                                 , "30"
                                 , "125"
                                 , "31"
                                 )
                                 ; id>
                              )|_])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "126"
              , "8"
              , "131"
              , "31"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "126"
               , "8"
               , "126"
               , "21"
               )
               ; hashtable-keys)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "127"
              , "8"
              , "131"
              , "31"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "127"
               , "8"
               , "127"
               , "79"
               )
               ; map(
                   s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                   , "127"
                   , "12"
                   , "127"
                   , "78"
                   )
                   ; (s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "127"
                      , "12"
                      , "127"
                      , "14"
                      )
                      ; Snd)
                   ; s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "127"
                     , "17"
                     , "127"
                     , "78"
                     )
                   ; (s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "127"
                      , "17"
                      , "127"
                      , "71"
                      )
                      ; !( <s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "127"
                            , "20"
                            , "127"
                            , "21"
                            )
                            ; id>
                         , <s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "127"
                            , "26"
                            , "127"
                            , "30"
                            )
                            ; merge> ( <s-step(
                                        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                        , "127"
                                        , "34"
                                        , "127"
                                        , "60"
                                        )
                                        ; dr-symbolic-lookup(
                                            s-step(
                                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                            , "127"
                                            , "53"
                                            , "127"
                                            , "55"
                                            )
                                            ; aux
                                          | rs1
                                          )>
                                     , <s-step(
                                        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                        , "127"
                                        , "65"
                                        , "127"
                                        , "68"
                                        )
                                        ; call>
                                     )
                         ))
                   ; s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "127"
                     , "74"
                     , "127"
                     , "78"
                     )
                   ; redef
                 ))
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "128"
              , "8"
              , "131"
              , "31"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "128"
               , "8"
               , "128"
               , "60"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                  , "128"
                  , "8"
                  , "128"
                  , "33"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "128"
                     , "8"
                     , "128"
                     , "26"
                     )
                     ; dr-get-rule-set(|R)) => rs2) => [ChangeSet(
                                                          _
                                                        , _
                                                        , <s-step(
                                                           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                                           , "128"
                                                           , "54"
                                                           , "128"
                                                           , "55"
                                                           )
                                                           ; id>
                                                        )|_])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "129"
              , "8"
              , "131"
              , "31"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "129"
               , "8"
               , "129"
               , "21"
               )
               ; hashtable-keys)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "130"
              , "8"
              , "131"
              , "31"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
               , "130"
               , "8"
               , "130"
               , "79"
               )
               ; map(
                   s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                   , "130"
                   , "12"
                   , "130"
                   , "78"
                   )
                   ; (s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "130"
                      , "12"
                      , "130"
                      , "14"
                      )
                      ; Snd)
                   ; s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "130"
                     , "17"
                     , "130"
                     , "78"
                     )
                   ; (s-step(
                      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                      , "130"
                      , "17"
                      , "130"
                      , "71"
                      )
                      ; !( <s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "130"
                            , "20"
                            , "130"
                            , "21"
                            )
                            ; id>
                         , <s-step(
                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                            , "130"
                            , "26"
                            , "130"
                            , "30"
                            )
                            ; merge> ( <s-step(
                                        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                        , "130"
                                        , "34"
                                        , "130"
                                        , "60"
                                        )
                                        ; dr-symbolic-lookup(
                                            s-step(
                                            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                            , "130"
                                            , "53"
                                            , "130"
                                            , "55"
                                            )
                                            ; aux
                                          | rs1
                                          )>
                                     , <s-step(
                                        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                                        , "130"
                                        , "65"
                                        , "130"
                                        , "68"
                                        )
                                        ; call>
                                     )
                         ))
                   ; s-step(
                     | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
                     , "130"
                     , "74"
                     , "130"
                     , "78"
                     )
                   ; redef
                 ))
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
              , "131"
              , "8"
              , "131"
              , "31"
              )
            ; dr-commit-change-set(|R))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-symbolic-merge-rulesets"
      , "123"
      , "2"
      , "132"
      , "4"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-symbolic-merge-rulesets"
      , "123"
      , "2"
      , "132"
      , "4"
      )
      ; fail

  dr-symbolic-lookup(aux|rs) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
    , "dr-symbolic-lookup"
    , "136"
    , "2"
    , "139"
    , "15"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "137"
      , "4"
      , "139"
      , "15"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "137"
       , "4"
       , "137"
       , "5"
       )
       ; ?x)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "138"
      , "6"
      , "139"
      , "15"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
       , "138"
       , "6"
       , "138"
       , "28"
       )
       ; <(s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
           , "138"
           , "7"
           , "138"
           , "24"
           )
           ; dr-lookup-rule(|x))> rs)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "139"
      , "6"
      , "139"
      , "15"
      )
    ; ?[<s-step(
         | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
         , "139"
         , "9"
         , "139"
         , "11"
         )
         ; aux>|_]
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-symbolic-lookup"
      , "136"
      , "2"
      , "139"
      , "15"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules/til/typestate/til-typestate.str"
      , "dr-symbolic-lookup"
      , "136"
      , "2"
      , "139"
      , "15"
      )
      ; fail