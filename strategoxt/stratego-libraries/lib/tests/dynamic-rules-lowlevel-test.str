module dynamic-rules-lowlevel-test

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  libstratego-lib


strategies
  main-dynamic-rules-lowlevel-test =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
    , "main-dynamic-rules-lowlevel-test"
    , "6"
    , "2"
    , "13"
    , "4"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "7"
      , "4"
      , "13"
      , "4"
      )
    ; test-suite(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "7"
        , "15"
        , "7"
        , "49"
        )
        ; !"dynamic-rules-tested (low-level)"
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "8"
        , "6"
        , "11"
        , "34"
        )
        ; (s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "8"
           , "6"
           , "8"
           , "28"
           )
           ; test-dr-set-in-rule-set)
        ; s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
          , "9"
          , "8"
          , "11"
          , "34"
          )
        ; (s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "9"
           , "8"
           , "9"
           , "30"
           )
           ; test-dr-add-to-rule-set)
        ; s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
          , "10"
          , "8"
          , "11"
          , "34"
          )
        ; (s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "10"
           , "8"
           , "10"
           , "22"
           )
           ; test-change-set)
        ; s-step(
          | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
          , "11"
          , "8"
          , "11"
          , "34"
          )
        ; test-dr-intersect-rule-sets
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "main-dynamic-rules-lowlevel-test"
      , "6"
      , "2"
      , "13"
      , "4"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "main-dynamic-rules-lowlevel-test"
      , "6"
      , "2"
      , "13"
      , "4"
      )
      ; fail

  test-dr-set-in-rule-set =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
    , "test-dr-set-in-rule-set"
    , "15"
    , "2"
    , "89"
    , "1"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "16"
      , "4"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "16"
       , "4"
       , "16"
       , "47"
       )
       ; say(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "16"
           , "8"
           , "16"
           , "46"
           )
           ; !"testing low-level dr-set-in-rule-set"
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "17"
      , "4"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "17"
       , "4"
       , "21"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "17"
           , "20"
           , "17"
           , "54"
           )
           ; !"test-dr-set-in-rule-set creation"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "18"
           , "3"
           , "18"
           , "17"
           )
           ; dr-new-rule-set
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "19"
           , "3"
           , "19"
           , "5"
           )
           ; !()
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "20"
           , "3"
           , "20"
           , "6"
           )
           ; ?rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "22"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "22"
       , "6"
       , "25"
       , "1"
       )
       ; apply-and-fail(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "22"
           , "21"
           , "22"
           , "66"
           )
           ; !"test-dr-set-in-rule-set lookup non-existing"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "23"
           , "3"
           , "23"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "24"
           , "3"
           , "24"
           , "6"
           )
           ; !rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "26"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "26"
       , "6"
       , "30"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "26"
           , "17"
           , "26"
           , "51"
           )
           ; !"test-dr-set-in-rule-set add rule"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "27"
           , "3"
           , "27"
           , "41"
           )
           ; dr-set-in-rule-set(|"KeyA", ["value1"])
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "28"
           , "3"
           , "28"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "29"
           , "3"
           , "29"
           , "6"
           )
           ; !rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "31"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "31"
       , "6"
       , "35"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "31"
           , "17"
           , "31"
           , "49"
           )
           ; !"test-dr-set-in-rule-set lookup"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "32"
           , "3"
           , "32"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "33"
           , "3"
           , "33"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "34"
           , "3"
           , "34"
           , "13"
           )
           ; !["value1"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "36"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "36"
       , "6"
       , "42"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "36"
           , "22"
           , "36"
           , "63"
           )
           ; !"test-dr-set-in-rule-set label/add scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "37"
           , "3"
           , "39"
           , "16"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "37"
              , "3"
              , "37"
              , "22"
              )
              ; dr-label-scope(|"A"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "38"
             , "5"
             , "39"
             , "16"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "38"
              , "5"
              , "38"
              , "16"
              )
              ; dr-add-scope)
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "38"
             , "19"
             , "39"
             , "16"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "38"
              , "19"
              , "38"
              , "38"
              )
              ; dr-label-scope(|"B"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "39"
             , "5"
             , "39"
             , "16"
             )
           ; dr-add-scope
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "40"
           , "3"
           , "40"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "41"
           , "3"
           , "41"
           , "6"
           )
           ; ?rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "43"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "43"
       , "6"
       , "47"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "43"
           , "17"
           , "43"
           , "65"
           )
           ; !"test-dr-set-in-rule-set lookup in higher scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "44"
           , "3"
           , "44"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "45"
           , "3"
           , "45"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "46"
           , "3"
           , "46"
           , "13"
           )
           ; !["value1"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "48"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "48"
       , "6"
       , "54"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "48"
           , "17"
           , "48"
           , "62"
           )
           ; !"test-dr-set-in-rule-set add (labeled) rules"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "49"
           , "3"
           , "51"
           , "48"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "49"
              , "3"
              , "49"
              , "41"
              )
              ; dr-set-in-rule-set(|"KeyA", ["value4"]))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "50"
             , "5"
             , "51"
             , "48"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "50"
              , "5"
              , "50"
              , "48"
              )
              ; dr-set-in-rule-set(
                | "A"
                , "KeyA"
                , ["value5"]
                ))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "51"
             , "5"
             , "51"
             , "48"
             )
           ; dr-set-in-rule-set(
             | "B"
             , "KeyA"
             , ["value6"]
             )
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "52"
           , "3"
           , "52"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "53"
           , "3"
           , "53"
           , "6"
           )
           ; !rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "55"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "55"
       , "6"
       , "59"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "55"
           , "17"
           , "55"
           , "49"
           )
           ; !"test-dr-set-in-rule-set lookup"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "56"
           , "3"
           , "56"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "57"
           , "3"
           , "57"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "58"
           , "3"
           , "58"
           , "13"
           )
           ; !["value4"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "60"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "60"
       , "6"
       , "64"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "60"
           , "17"
           , "60"
           , "64"
           )
           ; !"test-dr-set-in-rule-set undefine labeled rule"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "61"
           , "3"
           , "61"
           , "38"
           )
           ; dr-set-in-rule-set(|"B", "KeyA", [])
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "62"
           , "3"
           , "62"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "63"
           , "3"
           , "63"
           , "6"
           )
           ; !rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "65"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "65"
       , "6"
       , "69"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "65"
           , "17"
           , "65"
           , "65"
           )
           ; !"test-dr-set-in-rule-set lookup higher is empty"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "66"
           , "3"
           , "66"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "67"
           , "3"
           , "67"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "68"
           , "3"
           , "68"
           , "13"
           )
           ; !["value4"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "70"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "70"
       , "6"
       , "74"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "70"
           , "17"
           , "70"
           , "56"
           )
           ; !"test-dr-set-in-rule-set undefine rule"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "71"
           , "3"
           , "71"
           , "33"
           )
           ; dr-set-in-rule-set(|"KeyA", [])
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "72"
           , "3"
           , "72"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "73"
           , "3"
           , "73"
           , "6"
           )
           ; !rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "75"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "75"
       , "6"
       , "79"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "75"
           , "17"
           , "75"
           , "55"
           )
           ; !"test-dr-set-in-rule-set lookup empty"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "76"
           , "3"
           , "76"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "77"
           , "3"
           , "77"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "78"
           , "3"
           , "78"
           , "5"
           )
           ; ![]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "80"
      , "6"
      , "89"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "80"
       , "6"
       , "84"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "80"
           , "22"
           , "80"
           , "59"
           )
           ; !"test-dr-set-in-rule-set leave scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "81"
           , "3"
           , "81"
           , "32"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "81"
              , "3"
              , "81"
              , "16"
              )
              ; dr-leave-scope)
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "81"
             , "19"
             , "81"
             , "32"
             )
           ; dr-leave-scope
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "82"
           , "3"
           , "82"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "83"
           , "3"
           , "83"
           , "6"
           )
           ; ?rs2
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "85"
      , "6"
      , "89"
      , "1"
      )
    ; apply-test(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "85"
        , "17"
        , "85"
        , "67"
        )
        ; !"test-dr-set-in-rule-set lookup in returned scope"
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "86"
        , "3"
        , "86"
        , "25"
        )
        ; dr-lookup-rule(|"KeyA")
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "87"
        , "3"
        , "87"
        , "6"
        )
        ; !rs2
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "88"
        , "3"
        , "88"
        , "13"
        )
        ; !["value5"]
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-dr-set-in-rule-set"
      , "15"
      , "2"
      , "89"
      , "1"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-dr-set-in-rule-set"
      , "15"
      , "2"
      , "89"
      , "1"
      )
      ; fail

  test-dr-add-to-rule-set =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
    , "test-dr-add-to-rule-set"
    , "92"
    , "2"
    , "174"
    , "1"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "93"
      , "4"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "93"
       , "4"
       , "93"
       , "47"
       )
       ; say(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "93"
           , "8"
           , "93"
           , "46"
           )
           ; !"testing low-level dr-add-to-rule-set"
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "94"
      , "4"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "94"
       , "4"
       , "98"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "94"
           , "20"
           , "94"
           , "54"
           )
           ; !"test-dr-add-to-rule-set creation"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "95"
           , "3"
           , "95"
           , "17"
           )
           ; dr-new-rule-set
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "96"
           , "3"
           , "96"
           , "5"
           )
           ; !()
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "97"
           , "3"
           , "97"
           , "6"
           )
           ; ?rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "99"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "99"
       , "6"
       , "102"
       , "1"
       )
       ; apply-and-fail(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "99"
           , "21"
           , "99"
           , "66"
           )
           ; !"test-dr-add-to-rule-set lookup non-existing"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "100"
           , "3"
           , "100"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "101"
           , "3"
           , "101"
           , "6"
           )
           ; !rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "103"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "103"
       , "6"
       , "107"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "103"
           , "17"
           , "103"
           , "54"
           )
           ; !"test-dr-add-to-rule-set extend rule"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "104"
           , "3"
           , "104"
           , "39"
           )
           ; dr-add-to-rule-set(|"KeyA", "value1")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "105"
           , "3"
           , "105"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "106"
           , "3"
           , "106"
           , "6"
           )
           ; !rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "108"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "108"
       , "6"
       , "112"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "108"
           , "17"
           , "108"
           , "59"
           )
           ; !"test-dr-add-to-rule-set lookup singleton"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "109"
           , "3"
           , "109"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "110"
           , "3"
           , "110"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "111"
           , "3"
           , "111"
           , "13"
           )
           ; !["value1"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "113"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "113"
       , "6"
       , "119"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "113"
           , "22"
           , "113"
           , "63"
           )
           ; !"test-dr-add-to-rule-set label/add scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "114"
           , "3"
           , "116"
           , "16"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "114"
              , "3"
              , "114"
              , "22"
              )
              ; dr-label-scope(|"A"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "115"
             , "5"
             , "116"
             , "16"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "115"
              , "5"
              , "115"
              , "16"
              )
              ; dr-add-scope)
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "115"
             , "19"
             , "116"
             , "16"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "115"
              , "19"
              , "115"
              , "38"
              )
              ; dr-label-scope(|"B"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "116"
             , "5"
             , "116"
             , "16"
             )
           ; dr-add-scope
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "117"
           , "3"
           , "117"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "118"
           , "3"
           , "118"
           , "6"
           )
           ; ?rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "120"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "120"
       , "6"
       , "124"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "120"
           , "17"
           , "120"
           , "65"
           )
           ; !"test-dr-add-to-rule-set lookup in higher scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "121"
           , "3"
           , "121"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "122"
           , "3"
           , "122"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "123"
           , "3"
           , "123"
           , "13"
           )
           ; !["value1"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "125"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "125"
       , "6"
       , "134"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "125"
           , "17"
           , "125"
           , "65"
           )
           ; !"test-dr-add-to-rule-set extend (labeled) rules"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "126"
           , "3"
           , "131"
           , "41"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "126"
              , "3"
              , "126"
              , "39"
              )
              ; dr-add-to-rule-set(|"KeyA", "value4"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "127"
             , "5"
             , "131"
             , "41"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "127"
              , "5"
              , "127"
              , "46"
              )
              ; dr-add-to-rule-set(|"A", "KeyA", "value5"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "128"
             , "5"
             , "131"
             , "41"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "128"
              , "5"
              , "128"
              , "46"
              )
              ; dr-add-to-rule-set(|"B", "KeyA", "value7"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "129"
             , "5"
             , "131"
             , "41"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "129"
              , "5"
              , "129"
              , "46"
              )
              ; dr-add-to-rule-set(|"B", "KeyB", "value8"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "130"
             , "5"
             , "131"
             , "41"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "130"
              , "5"
              , "130"
              , "46"
              )
              ; dr-add-to-rule-set(|"B", "KeyB", "value9"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "131"
             , "5"
             , "131"
             , "41"
             )
           ; dr-add-to-rule-set(|"KeyA", "value6")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "132"
           , "3"
           , "132"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "133"
           , "3"
           , "133"
           , "6"
           )
           ; !rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "135"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "135"
       , "6"
       , "139"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "135"
           , "17"
           , "135"
           , "63"
           )
           ; !"test-dr-add-to-rule-set lookup current scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "136"
           , "3"
           , "136"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "137"
           , "3"
           , "137"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "138"
           , "3"
           , "138"
           , "22"
           )
           ; !["value6", "value4"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "140"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "140"
       , "6"
       , "144"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "140"
           , "17"
           , "140"
           , "62"
           )
           ; !"test-dr-add-to-rule-set lookup higher scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "141"
           , "3"
           , "141"
           , "25"
           )
           ; dr-lookup-rule(|"KeyB")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "142"
           , "3"
           , "142"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "143"
           , "3"
           , "143"
           , "22"
           )
           ; !["value9", "value8"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "145"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "145"
       , "6"
       , "149"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "145"
           , "17"
           , "145"
           , "67"
           )
           ; !"test-dr-add-to-rule-set undefine in higher scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "146"
           , "3"
           , "146"
           , "38"
           )
           ; dr-set-in-rule-set(|"A", "KeyB", [])
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "147"
           , "3"
           , "147"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "148"
           , "3"
           , "148"
           , "6"
           )
           ; !rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "150"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "150"
       , "6"
       , "154"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "150"
           , "17"
           , "150"
           , "65"
           )
           ; !"test-dr-add-to-rule-set lookup higher is empty"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "151"
           , "3"
           , "151"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "152"
           , "3"
           , "152"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "153"
           , "3"
           , "153"
           , "22"
           )
           ; !["value6", "value4"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "155"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "155"
       , "6"
       , "159"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "155"
           , "17"
           , "155"
           , "68"
           )
           ; !"test-dr-add-to-rule-set undefine in current scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "156"
           , "3"
           , "156"
           , "33"
           )
           ; dr-set-in-rule-set(|"KeyA", [])
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "157"
           , "3"
           , "157"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "158"
           , "3"
           , "158"
           , "6"
           )
           ; !rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "160"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "160"
       , "6"
       , "164"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "160"
           , "17"
           , "160"
           , "55"
           )
           ; !"test-dr-add-to-rule-set lookup empty"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "161"
           , "3"
           , "161"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "162"
           , "3"
           , "162"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "163"
           , "3"
           , "163"
           , "5"
           )
           ; ![]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "165"
      , "6"
      , "174"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "165"
       , "6"
       , "169"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "165"
           , "22"
           , "165"
           , "59"
           )
           ; !"test-dr-add-to-rule-set leave scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "166"
           , "3"
           , "166"
           , "32"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "166"
              , "3"
              , "166"
              , "16"
              )
              ; dr-leave-scope)
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "166"
             , "19"
             , "166"
             , "32"
             )
           ; dr-leave-scope
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "167"
           , "3"
           , "167"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "168"
           , "3"
           , "168"
           , "6"
           )
           ; ?rs2
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "170"
      , "6"
      , "174"
      , "1"
      )
    ; apply-test(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "170"
        , "17"
        , "170"
        , "67"
        )
        ; !"test-dr-add-to-rule-set lookup in returned scope"
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "171"
        , "3"
        , "171"
        , "25"
        )
        ; dr-lookup-rule(|"KeyA")
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "172"
        , "3"
        , "172"
        , "6"
        )
        ; !rs2
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "173"
        , "3"
        , "173"
        , "22"
        )
        ; !["value5", "value1"]
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-dr-add-to-rule-set"
      , "92"
      , "2"
      , "174"
      , "1"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-dr-add-to-rule-set"
      , "92"
      , "2"
      , "174"
      , "1"
      )
      ; fail

  test-change-set =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
    , "test-change-set"
    , "176"
    , "2"
    , "244"
    , "1"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "177"
      , "4"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "177"
       , "4"
       , "177"
       , "29"
       )
       ; say(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "177"
           , "8"
           , "177"
           , "28"
           )
           ; !"testing change-set"
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "178"
      , "4"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "178"
       , "4"
       , "182"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "178"
           , "20"
           , "178"
           , "46"
           )
           ; !"test-change-set add rule"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "179"
           , "3"
           , "179"
           , "17"
           )
           ; dr-new-rule-set
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "180"
           , "3"
           , "180"
           , "5"
           )
           ; !()
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "181"
           , "3"
           , "181"
           , "6"
           )
           ; ?rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "183"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "183"
       , "6"
       , "186"
       , "1"
       )
       ; apply-and-fail(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "183"
           , "21"
           , "183"
           , "45"
           )
           ; !"test-change-set lookup"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "184"
           , "3"
           , "184"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "185"
           , "3"
           , "185"
           , "6"
           )
           ; !rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "187"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "187"
       , "6"
       , "191"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "187"
           , "17"
           , "187"
           , "44"
           )
           ; !"test-change-set add rules"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "188"
           , "3"
           , "188"
           , "41"
           )
           ; dr-set-in-rule-set(|"KeyA", ["value1"])
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "189"
           , "3"
           , "189"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "190"
           , "3"
           , "190"
           , "6"
           )
           ; !rs0
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "192"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "192"
       , "6"
       , "196"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "192"
           , "17"
           , "192"
           , "41"
           )
           ; !"test-change-set lookup"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "193"
           , "3"
           , "193"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "194"
           , "3"
           , "194"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "195"
           , "3"
           , "195"
           , "13"
           )
           ; !["value1"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "197"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "197"
       , "6"
       , "203"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "197"
           , "22"
           , "197"
           , "73"
           )
           ; !"test-change-set label/add scope, start change set"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "198"
           , "3"
           , "200"
           , "30"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "198"
              , "3"
              , "198"
              , "22"
              )
              ; dr-label-scope(|"A"))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "199"
             , "5"
             , "200"
             , "30"
             )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "199"
              , "5"
              , "199"
              , "16"
              )
              ; dr-add-scope)
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "200"
             , "12"
             , "200"
             , "30"
             )
           ; dr-start-change-set
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "201"
           , "3"
           , "201"
           , "6"
           )
           ; !rs0
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "202"
           , "3"
           , "202"
           , "6"
           )
           ; ?rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "204"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "204"
       , "6"
       , "208"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "204"
           , "17"
           , "204"
           , "41"
           )
           ; !"test-change-set lookup"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "205"
           , "3"
           , "205"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "206"
           , "3"
           , "206"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "207"
           , "3"
           , "207"
           , "13"
           )
           ; !["value1"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "209"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "209"
       , "6"
       , "214"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "209"
           , "17"
           , "209"
           , "44"
           )
           ; !"test-change-set add rules"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "210"
           , "3"
           , "211"
           , "48"
           )
           ; (s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "210"
              , "3"
              , "210"
              , "41"
              )
              ; dr-set-in-rule-set(|"KeyA", ["value4"]))
           ; s-step(
             | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
             , "211"
             , "5"
             , "211"
             , "48"
             )
           ; dr-set-in-rule-set(
             | "A"
             , "KeyA"
             , ["value5"]
             )
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "212"
           , "3"
           , "212"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "213"
           , "3"
           , "213"
           , "6"
           )
           ; !rs1
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "215"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "215"
       , "6"
       , "219"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "215"
           , "17"
           , "215"
           , "41"
           )
           ; !"test-change-set lookup"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "216"
           , "3"
           , "216"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "217"
           , "3"
           , "217"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "218"
           , "3"
           , "218"
           , "13"
           )
           ; !["value4"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "225"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "225"
       , "6"
       , "229"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "225"
           , "22"
           , "225"
           , "57"
           )
           ; !"test-change-set commit change set"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "226"
           , "3"
           , "226"
           , "22"
           )
           ; dr-commit-change-set
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "227"
           , "3"
           , "227"
           , "6"
           )
           ; !rs1
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "228"
           , "3"
           , "228"
           , "6"
           )
           ; ?rs2
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "230"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "230"
       , "6"
       , "234"
       , "1"
       )
       ; apply-test(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "230"
           , "17"
           , "230"
           , "41"
           )
           ; !"test-change-set lookup"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "231"
           , "3"
           , "231"
           , "25"
           )
           ; dr-lookup-rule(|"KeyA")
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "232"
           , "3"
           , "232"
           , "6"
           )
           ; !rs2
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "233"
           , "3"
           , "233"
           , "13"
           )
           ; !["value4"]
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "235"
      , "6"
      , "244"
      , "1"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "235"
       , "6"
       , "239"
       , "1"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "235"
           , "22"
           , "235"
           , "51"
           )
           ; !"test-change-set leave scope"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "236"
           , "3"
           , "236"
           , "16"
           )
           ; dr-leave-scope
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "237"
           , "3"
           , "237"
           , "6"
           )
           ; !rs2
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "238"
           , "3"
           , "238"
           , "6"
           )
           ; ?rs3
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "240"
      , "6"
      , "244"
      , "1"
      )
    ; apply-test(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "240"
        , "17"
        , "240"
        , "41"
        )
        ; !"test-change-set lookup"
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "241"
        , "3"
        , "241"
        , "25"
        )
        ; dr-lookup-rule(|"KeyA")
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "242"
        , "3"
        , "242"
        , "6"
        )
        ; !rs3
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "243"
        , "3"
        , "243"
        , "13"
        )
        ; !["value5"]
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-change-set"
      , "176"
      , "2"
      , "244"
      , "1"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-change-set"
      , "176"
      , "2"
      , "244"
      , "1"
      )
      ; fail

  test-dr-intersect-rule-sets =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
    , "test-dr-intersect-rule-sets"
    , "246"
    , "2"
    , "284"
    , "34"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "247"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "247"
       , "4"
       , "247"
       , "41"
       )
       ; say(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "247"
           , "8"
           , "247"
           , "40"
           )
           ; !"testing dr-intersect-rule-sets"
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "249"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "249"
       , "4"
       , "249"
       , "32"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "249"
               , "10"
               , "249"
               , "31"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                  , "249"
                  , "10"
                  , "249"
                  , "24"
                  )
                  ; dr-new-rule-set) => rs1))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "250"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "250"
       , "4"
       , "250"
       , "32"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "250"
               , "10"
               , "250"
               , "31"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                  , "250"
                  , "10"
                  , "250"
                  , "24"
                  )
                  ; dr-new-rule-set) => rs2))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "251"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "251"
       , "4"
       , "251"
       , "34"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "251"
               , "10"
               , "251"
               , "33"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                  , "251"
                  , "10"
                  , "251"
                  , "24"
                  )
                  ; dr-new-rule-set) => rsi12))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "252"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "252"
       , "4"
       , "255"
       , "34"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "252"
           , "20"
           , "252"
           , "60"
           )
           ; !"test-dr-intersect-rule-sets empty sets"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "253"
           , "4"
           , "253"
           , "30"
           )
           ; try(
               s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "253"
               , "8"
               , "253"
               , "29"
               )
               ; dr-intersect-rule-sets
             )
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "254"
           , "4"
           , "254"
           , "14"
           )
           ; !(rs1, rs2)
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "255"
           , "4"
           , "255"
           , "33"
           )
           ; <(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "255"
               , "5"
               , "255"
               , "19"
               )
               ; dr-eq-rule-sets)> (rs1, rsi12)
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "257"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "257"
       , "3"
       , "257"
       , "54"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "257"
               , "9"
               , "257"
               , "53"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "257"
                   , "10"
                   , "257"
                   , "48"
                   )
                   ; dr-set-in-rule-set(|"KeyA", ["value2"]))> rs2))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "258"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "258"
       , "3"
       , "258"
       , "48"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "258"
               , "9"
               , "258"
               , "47"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "258"
                   , "10"
                   , "258"
                   , "40"
                   )
                   ; dr-set-in-rule-set(|"KeyA", []))> rsi12))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "259"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "259"
       , "4"
       , "262"
       , "34"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "259"
           , "20"
           , "259"
           , "63"
           )
           ; !"test-dr-intersect-rule-sets 1st empty set"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "260"
           , "4"
           , "260"
           , "30"
           )
           ; try(
               s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "260"
               , "8"
               , "260"
               , "29"
               )
               ; dr-intersect-rule-sets
             )
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "261"
           , "4"
           , "261"
           , "14"
           )
           ; !(rs1, rs2)
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "262"
           , "4"
           , "262"
           , "33"
           )
           ; <(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "262"
               , "5"
               , "262"
               , "19"
               )
               ; dr-eq-rule-sets)> (rs1, rsi12)
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "264"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "264"
       , "3"
       , "264"
       , "54"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "264"
               , "9"
               , "264"
               , "53"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "264"
                   , "10"
                   , "264"
                   , "48"
                   )
                   ; dr-set-in-rule-set(|"KeyA", ["value1"]))> rs1))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "265"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "265"
       , "3"
       , "265"
       , "46"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "265"
               , "9"
               , "265"
               , "45"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "265"
                   , "10"
                   , "265"
                   , "40"
                   )
                   ; dr-set-in-rule-set(|"KeyA", []))> rs2))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "266"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "266"
       , "4"
       , "269"
       , "34"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "266"
           , "20"
           , "266"
           , "63"
           )
           ; !"test-dr-intersect-rule-sets 2nd empty set"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "267"
           , "4"
           , "267"
           , "30"
           )
           ; try(
               s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "267"
               , "8"
               , "267"
               , "29"
               )
               ; dr-intersect-rule-sets
             )
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "268"
           , "4"
           , "268"
           , "14"
           )
           ; !(rs1, rs2)
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "269"
           , "4"
           , "269"
           , "33"
           )
           ; <(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "269"
               , "5"
               , "269"
               , "19"
               )
               ; dr-eq-rule-sets)> (rs1, rsi12)
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "271"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "271"
       , "3"
       , "271"
       , "54"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "271"
               , "9"
               , "271"
               , "53"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "271"
                   , "10"
                   , "271"
                   , "48"
                   )
                   ; dr-set-in-rule-set(|"KeyA", ["value1"]))> rs1))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "272"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "272"
       , "3"
       , "272"
       , "54"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "272"
               , "9"
               , "272"
               , "53"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "272"
                   , "10"
                   , "272"
                   , "48"
                   )
                   ; dr-set-in-rule-set(|"KeyA", ["value3"]))> rs2))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "273"
      , "4"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "273"
       , "4"
       , "276"
       , "34"
       )
       ; apply-and-check(
           s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "273"
           , "20"
           , "273"
           , "72"
           )
           ; !"test-dr-intersect-rule-sets inequal singleton sets"
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "274"
           , "4"
           , "274"
           , "30"
           )
           ; try(
               s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "274"
               , "8"
               , "274"
               , "29"
               )
               ; dr-intersect-rule-sets
             )
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "275"
           , "4"
           , "275"
           , "14"
           )
           ; !(rs1, rs2)
         , s-step(
           | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
           , "276"
           , "4"
           , "276"
           , "33"
           )
           ; <(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "276"
               , "5"
               , "276"
               , "19"
               )
               ; dr-eq-rule-sets)> (rs1, rsi12)
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "278"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "278"
       , "3"
       , "278"
       , "54"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "278"
               , "9"
               , "278"
               , "53"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "278"
                   , "10"
                   , "278"
                   , "48"
                   )
                   ; dr-set-in-rule-set(|"KeyA", ["value4"]))> rs1))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "279"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "279"
       , "3"
       , "279"
       , "54"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "279"
               , "9"
               , "279"
               , "53"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "279"
                   , "10"
                   , "279"
                   , "48"
                   )
                   ; dr-set-in-rule-set(|"KeyA", ["value4"]))> rs2))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "280"
      , "3"
      , "284"
      , "34"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
       , "280"
       , "3"
       , "280"
       , "56"
       )
       ; where(s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "280"
               , "9"
               , "280"
               , "55"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "280"
                   , "10"
                   , "280"
                   , "48"
                   )
                   ; dr-set-in-rule-set(|"KeyA", ["value4"]))> rsi12))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "281"
      , "4"
      , "284"
      , "34"
      )
    ; apply-and-check(
        s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "281"
        , "20"
        , "281"
        , "70"
        )
        ; !"test-dr-intersect-rule-sets equal singleton sets"
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "282"
        , "4"
        , "282"
        , "30"
        )
        ; try(
            s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
            , "282"
            , "8"
            , "282"
            , "29"
            )
            ; dr-intersect-rule-sets
          )
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "283"
        , "4"
        , "283"
        , "14"
        )
        ; !(rs1, rs2)
      , s-step(
        | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
        , "284"
        , "4"
        , "284"
        , "33"
        )
        ; <(s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
            , "284"
            , "5"
            , "284"
            , "19"
            )
            ; dr-eq-rule-sets)> (rs1, rsi12)
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-dr-intersect-rule-sets"
      , "246"
      , "2"
      , "284"
      , "34"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "test-dr-intersect-rule-sets"
      , "246"
      , "2"
      , "284"
      , "34"
      )
      ; fail

  debug-rule-set(|msg) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
    , "debug-rule-set"
    , "345"
    , "2"
    , "350"
    , "4"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "346"
      , "4"
      , "350"
      , "4"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
            , "347"
            , "6"
            , "349"
            , "22"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "347"
               , "6"
               , "347"
               , "21"
               )
               ; dr-save-rule-set)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "348"
              , "5"
              , "349"
              , "22"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
               , "348"
               , "5"
               , "348"
               , "13"
               )
               ; say(
                   s-step(
                   | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                   , "348"
                   , "9"
                   , "348"
                   , "12"
                   )
                   ; !msg
                 ))
            ; s-step(
              | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
              , "349"
              , "6"
              , "349"
              , "22"
              )
            ; map(
                s-step(
                | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                , "349"
                , "10"
                , "349"
                , "21"
                )
                ; debug(
                    s-step(
                    | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
                    , "349"
                    , "16"
                    , "349"
                    , "20"
                    )
                    ; !"  "
                  )
              ))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "debug-rule-set"
      , "345"
      , "2"
      , "350"
      , "4"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/tests/dynamic-rules-lowlevel-test.str"
      , "debug-rule-set"
      , "345"
      , "2"
      , "350"
      , "4"
      )
      ; fail