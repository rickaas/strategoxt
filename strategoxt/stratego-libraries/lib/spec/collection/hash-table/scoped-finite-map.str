module lang/scoped-finite-map

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  collection/hash-table/common
  collection/list/-
  strategy/conditional


signature
  constructors
    Scopes : Key


strategies
  init-name-space(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "init-name-space"
    , "27"
    , "2"
    , "28"
    , "26"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "28"
      , "4"
      , "28"
      , "26"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "28"
            , "10"
            , "28"
            , "25"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "28"
               , "10"
               , "28"
               , "11"
               )
               ; ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "28"
              , "14"
              , "28"
              , "25"
              )
            ; table-create)
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "init-name-space"
      , "27"
      , "2"
      , "28"
      , "26"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "init-name-space"
      , "27"
      , "2"
      , "28"
      , "26"
      )
      ; fail

  exit-name-space(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "exit-name-space"
    , "30"
    , "2"
    , "31"
    , "27"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "31"
      , "4"
      , "31"
      , "27"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "31"
            , "10"
            , "31"
            , "26"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "31"
               , "10"
               , "31"
               , "11"
               )
               ; ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "31"
              , "14"
              , "31"
              , "26"
              )
            ; table-destroy)
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "exit-name-space"
      , "30"
      , "2"
      , "31"
      , "27"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "exit-name-space"
      , "30"
      , "2"
      , "31"
      , "27"
      )
      ; fail

  begin-scope(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "begin-scope"
    , "33"
    , "2"
    , "36"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "34"
      , "2"
      , "36"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "34"
            , "8"
            , "35"
            , "69"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "34"
               , "8"
               , "34"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "34"
                  , "8"
                  , "34"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "35"
              , "4"
              , "35"
              , "69"
              )
            ; <(s-step(
                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                , "35"
                , "5"
                , "35"
                , "13"
                )
                ; table-put)> ( ns
                              , Scopes()
                              , [[]|<s-step(
                                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                                     , "35"
                                     , "37"
                                     , "35"
                                     , "52"
                                     )
                                     ; (s-step(
                                        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                                        , "35"
                                        , "37"
                                        , "35"
                                        , "45"
                                        )
                                        ; table-get
                                        <+ s-step(
                                           | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                                           , "35"
                                           , "50"
                                           , "35"
                                           , "52"
                                           )
                                           ; ![])> (ns, Scopes())]
                              ))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "begin-scope"
      , "33"
      , "2"
      , "36"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "begin-scope"
      , "33"
      , "2"
      , "36"
      , "2"
      )
      ; fail

  end-scope(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "end-scope"
    , "38"
    , "2"
    , "43"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "39"
      , "2"
      , "43"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "39"
            , "8"
            , "42"
            , "52"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "39"
               , "8"
               , "39"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "39"
                  , "8"
                  , "39"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "40"
              , "4"
              , "42"
              , "52"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "40"
               , "4"
               , "40"
               , "69"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "40"
                  , "5"
                  , "40"
                  , "48"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "40"
                     , "5"
                     , "40"
                     , "39"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "40"
                         , "6"
                         , "40"
                         , "24"
                         )
                         ; (s-step(
                            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                            , "40"
                            , "6"
                            , "40"
                            , "14"
                            )
                            ; table-get)
                         ; s-step(
                           | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                           , "40"
                           , "17"
                           , "40"
                           , "24"
                           )
                         ; not(s-step(
                               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                               , "40"
                               , "21"
                               , "40"
                               , "23"
                               )
                               ; ?[]))> (ns, Scopes())
                     <+ s-step(
                        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                        , "40"
                        , "44"
                        , "40"
                        , "48"
                        )
                        ; ![[]])) => [scope|scopes])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "41"
              , "4"
              , "42"
              , "52"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "41"
               , "4"
               , "41"
               , "37"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                   , "41"
                   , "5"
                   , "41"
                   , "13"
                   )
                   ; table-put)> (ns, Scopes(), scopes))
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "42"
              , "4"
              , "42"
              , "52"
              )
            ; <(s-step(
                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                , "42"
                , "5"
                , "42"
                , "45"
                )
                ; map(
                    s-step(
                    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                    , "42"
                    , "10"
                    , "42"
                    , "43"
                    )
                    ; \ key -> <s-step(
                                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                                , "42"
                                , "20"
                                , "42"
                                , "31"
                                )
                                ; table-pop-rm> (ns, key) \
                  ))> scope)
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "end-scope"
      , "38"
      , "2"
      , "43"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "end-scope"
      , "38"
      , "2"
      , "43"
      , "2"
      )
      ; fail

  scope(ns, s) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "scope"
    , "48"
    , "2"
    , "49"
    , "52"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "49"
      , "4"
      , "49"
      , "52"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
       , "49"
       , "4"
       , "49"
       , "18"
       )
       ; begin-scope(
           s-step(
           | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
           , "49"
           , "16"
           , "49"
           , "17"
           )
           ; ns
         ))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "49"
      , "21"
      , "49"
      , "52"
      )
    ; restore-always(
        s-step(
        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
        , "49"
        , "36"
        , "49"
        , "36"
        )
        ; s
      , s-step(
        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
        , "49"
        , "39"
        , "49"
        , "51"
        )
        ; end-scope(
            s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "49"
            , "49"
            , "49"
            , "50"
            )
            ; ns
          )
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "scope"
      , "48"
      , "2"
      , "49"
      , "52"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "scope"
      , "48"
      , "2"
      , "49"
      , "52"
      )
      ; fail

  assert(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "assert"
    , "51"
    , "2"
    , "57"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "51"
      , "15"
      , "57"
      , "2"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
       , "51"
       , "15"
       , "51"
       , "25"
       )
       ; ?(key, val))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "52"
      , "2"
      , "57"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "52"
            , "8"
            , "55"
            , "54"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "52"
               , "8"
               , "52"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "52"
                  , "8"
                  , "52"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "53"
              , "4"
              , "55"
              , "54"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "53"
               , "4"
               , "53"
               , "29"
               )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                   , "53"
                   , "5"
                   , "53"
                   , "14"
                   )
                   ; table-push)> (ns, key, val))
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "54"
              , "4"
              , "55"
              , "54"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "54"
               , "4"
               , "54"
               , "69"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "54"
                  , "5"
                  , "54"
                  , "48"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "54"
                     , "5"
                     , "54"
                     , "39"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "54"
                         , "6"
                         , "54"
                         , "24"
                         )
                         ; (s-step(
                            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                            , "54"
                            , "6"
                            , "54"
                            , "14"
                            )
                            ; table-get)
                         ; s-step(
                           | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                           , "54"
                           , "17"
                           , "54"
                           , "24"
                           )
                         ; not(s-step(
                               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                               , "54"
                               , "21"
                               , "54"
                               , "23"
                               )
                               ; ?[]))> (ns, Scopes())
                     <+ s-step(
                        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                        , "54"
                        , "44"
                        , "54"
                        , "48"
                        )
                        ; ![[]])) => [scope|scopes])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "55"
              , "4"
              , "55"
              , "54"
              )
            ; <(s-step(
                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                , "55"
                , "5"
                , "55"
                , "13"
                )
                ; table-put)> ( ns
                              , Scopes()
                              , [[key|scope]|scopes]
                              ))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "assert"
      , "51"
      , "2"
      , "57"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "assert"
      , "51"
      , "2"
      , "57"
      , "2"
      )
      ; fail

  override-key(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "override-key"
    , "59"
    , "2"
    , "63"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "59"
      , "21"
      , "63"
      , "2"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
       , "59"
       , "21"
       , "59"
       , "31"
       )
       ; ?(key, val))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "60"
      , "2"
      , "63"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "60"
            , "8"
            , "61"
            , "32"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "60"
               , "8"
               , "60"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "60"
                  , "8"
                  , "60"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "61"
              , "4"
              , "61"
              , "32"
              )
            ; <(s-step(
                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                , "61"
                , "5"
                , "61"
                , "17"
                )
                ; table-replace)> (ns, key, val))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "override-key"
      , "59"
      , "2"
      , "63"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "override-key"
      , "59"
      , "2"
      , "63"
      , "2"
      )
      ; fail

  rewrite(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "rewrite"
    , "65"
    , "2"
    , "66"
    , "41"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "66"
      , "4"
      , "66"
      , "41"
      )
    ; \ key -> <s-step(
                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                , "66"
                , "14"
                , "66"
                , "25"
                )
                ; table-lookup> ( <s-step(
                                   | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                                   , "66"
                                   , "29"
                                   , "66"
                                   , "30"
                                   )
                                   ; ns> ()
                                , key
                                ) \
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "rewrite"
      , "65"
      , "2"
      , "66"
      , "41"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "rewrite"
      , "65"
      , "2"
      , "66"
      , "41"
      )
      ; fail

  extend-assert(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "extend-assert"
    , "72"
    , "2"
    , "82"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "72"
      , "22"
      , "82"
      , "2"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
       , "72"
       , "22"
       , "72"
       , "32"
       )
       ; ?(key, val))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "73"
      , "2"
      , "82"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "73"
            , "8"
            , "80"
            , "5"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "73"
               , "8"
               , "73"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "73"
                  , "8"
                  , "73"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "74"
              , "4"
              , "80"
              , "5"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "74"
               , "4"
               , "74"
               , "69"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "74"
                  , "5"
                  , "74"
                  , "48"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "74"
                     , "5"
                     , "74"
                     , "39"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "74"
                         , "6"
                         , "74"
                         , "24"
                         )
                         ; (s-step(
                            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                            , "74"
                            , "6"
                            , "74"
                            , "14"
                            )
                            ; table-get)
                         ; s-step(
                           | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                           , "74"
                           , "17"
                           , "74"
                           , "24"
                           )
                         ; not(s-step(
                               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                               , "74"
                               , "21"
                               , "74"
                               , "23"
                               )
                               ; ?[]))> (ns, Scopes())
                     <+ s-step(
                        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                        , "74"
                        , "44"
                        , "74"
                        , "48"
                        )
                        ; ![[]])) => [scope|scopes])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "75"
              , "5"
              , "79"
              , "59"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "75"
               , "5"
               , "77"
               , "57"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "75"
                  , "5"
                  , "75"
                  , "22"
                  )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                      , "75"
                      , "6"
                      , "75"
                      , "9"
                      )
                      ; elem)> (key, scope))
               ; s-step(
                 | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                 , "76"
                 , "7"
                 , "77"
                 , "57"
                 )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "76"
                  , "7"
                  , "76"
                  , "51"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "76"
                     , "7"
                     , "76"
                     , "26"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "76"
                         , "8"
                         , "76"
                         , "16"
                         )
                         ; table-get)> (ns, key)) => [prevvals|morevals])
               ; s-step(
                 | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                 , "77"
                 , "7"
                 , "77"
                 , "57"
                 )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                   , "77"
                   , "8"
                   , "77"
                   , "16"
                   )
                   ; table-put)> ( ns
                                 , key
                                 , [[val|prevvals]|morevals]
                                 )
               <+ s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "78"
                  , "7"
                  , "79"
                  , "59"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "78"
                     , "7"
                     , "78"
                     , "34"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "78"
                         , "8"
                         , "78"
                         , "17"
                         )
                         ; table-push)> (ns, key, [val]))
                  ; s-step(
                    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                    , "79"
                    , "9"
                    , "79"
                    , "59"
                    )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                      , "79"
                      , "10"
                      , "79"
                      , "18"
                      )
                      ; table-put)> ( ns
                                    , Scopes()
                                    , [[key|scope]|scopes]
                                    )))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-assert"
      , "72"
      , "2"
      , "82"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-assert"
      , "72"
      , "2"
      , "82"
      , "2"
      )
      ; fail

  extend-override-key(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "extend-override-key"
    , "84"
    , "2"
    , "89"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "84"
      , "28"
      , "89"
      , "2"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
       , "84"
       , "28"
       , "84"
       , "38"
       )
       ; ?(key, val))
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "85"
      , "2"
      , "89"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "85"
            , "8"
            , "87"
            , "56"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "85"
               , "8"
               , "85"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "85"
                  , "8"
                  , "85"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "86"
              , "6"
              , "87"
              , "56"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "86"
               , "6"
               , "86"
               , "50"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "86"
                  , "6"
                  , "86"
                  , "25"
                  )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                      , "86"
                      , "7"
                      , "86"
                      , "15"
                      )
                      ; table-get)> (ns, key)) => [prevvals|morevals])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "87"
              , "6"
              , "87"
              , "56"
              )
            ; <(s-step(
                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                , "87"
                , "7"
                , "87"
                , "15"
                )
                ; table-put)> ( ns
                              , key
                              , [[val|prevvals]|morevals]
                              ))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-override-key"
      , "84"
      , "2"
      , "89"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-override-key"
      , "84"
      , "2"
      , "89"
      , "2"
      )
      ; fail

  extend-assert-undefined(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "extend-assert-undefined"
    , "91"
    , "2"
    , "101"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "91"
      , "32"
      , "101"
      , "2"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
       , "91"
       , "32"
       , "91"
       , "35"
       )
       ; ?key)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "92"
      , "2"
      , "101"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "92"
            , "8"
            , "99"
            , "5"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "92"
               , "8"
               , "92"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "92"
                  , "8"
                  , "92"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "93"
              , "4"
              , "99"
              , "5"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "93"
               , "4"
               , "93"
               , "69"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "93"
                  , "5"
                  , "93"
                  , "48"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "93"
                     , "5"
                     , "93"
                     , "39"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "93"
                         , "6"
                         , "93"
                         , "24"
                         )
                         ; (s-step(
                            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                            , "93"
                            , "6"
                            , "93"
                            , "14"
                            )
                            ; table-get)
                         ; s-step(
                           | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                           , "93"
                           , "17"
                           , "93"
                           , "24"
                           )
                         ; not(s-step(
                               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                               , "93"
                               , "21"
                               , "93"
                               , "23"
                               )
                               ; ?[]))> (ns, Scopes())
                     <+ s-step(
                        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                        , "93"
                        , "44"
                        , "93"
                        , "48"
                        )
                        ; ![[]])) => [scope|scopes])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "94"
              , "5"
              , "98"
              , "59"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "94"
               , "5"
               , "96"
               , "43"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "94"
                  , "5"
                  , "94"
                  , "22"
                  )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                      , "94"
                      , "6"
                      , "94"
                      , "9"
                      )
                      ; elem)> (key, scope))
               ; s-step(
                 | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                 , "95"
                 , "7"
                 , "96"
                 , "43"
                 )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "95"
                  , "7"
                  , "95"
                  , "51"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "95"
                     , "7"
                     , "95"
                     , "26"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "95"
                         , "8"
                         , "95"
                         , "16"
                         )
                         ; table-get)> (ns, key)) => [prevvals|morevals])
               ; s-step(
                 | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                 , "96"
                 , "7"
                 , "96"
                 , "43"
                 )
               ; <(s-step(
                   | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                   , "96"
                   , "8"
                   , "96"
                   , "16"
                   )
                   ; table-put)> (ns, key, [[]|morevals])
               <+ s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "97"
                  , "7"
                  , "98"
                  , "59"
                  )
                  ; (s-step(
                     | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                     , "97"
                     , "7"
                     , "97"
                     , "31"
                     )
                     ; <(s-step(
                         | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                         , "97"
                         , "8"
                         , "97"
                         , "17"
                         )
                         ; table-push)> (ns, key, []))
                  ; s-step(
                    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                    , "98"
                    , "9"
                    , "98"
                    , "59"
                    )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                      , "98"
                      , "10"
                      , "98"
                      , "18"
                      )
                      ; table-put)> ( ns
                                    , Scopes()
                                    , [[key|scope]|scopes]
                                    )))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-assert-undefined"
      , "91"
      , "2"
      , "101"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-assert-undefined"
      , "91"
      , "2"
      , "101"
      , "2"
      )
      ; fail

  extend-override-key-undefined(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "extend-override-key-undefined"
    , "103"
    , "2"
    , "108"
    , "2"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "103"
      , "38"
      , "108"
      , "2"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
       , "103"
       , "38"
       , "103"
       , "41"
       )
       ; ?key)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "104"
      , "2"
      , "108"
      , "2"
      )
    ; where(s-step(
            | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
            , "104"
            , "8"
            , "106"
            , "42"
            )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "104"
               , "8"
               , "104"
               , "15"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "104"
                  , "8"
                  , "104"
                  , "9"
                  )
                  ; ns) => ns)
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "105"
              , "6"
              , "106"
              , "42"
              )
            ; (s-step(
               | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
               , "105"
               , "6"
               , "105"
               , "50"
               )
               ; (s-step(
                  | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                  , "105"
                  , "6"
                  , "105"
                  , "25"
                  )
                  ; <(s-step(
                      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                      , "105"
                      , "7"
                      , "105"
                      , "15"
                      )
                      ; table-get)> (ns, key)) => [prevvals|morevals])
            ; s-step(
              | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
              , "106"
              , "6"
              , "106"
              , "42"
              )
            ; <(s-step(
                | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
                , "106"
                , "7"
                , "106"
                , "15"
                )
                ; table-put)> (ns, key, [[]|morevals]))
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-override-key-undefined"
      , "103"
      , "2"
      , "108"
      , "2"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-override-key-undefined"
      , "103"
      , "2"
      , "108"
      , "2"
      )
      ; fail

  extend-rewrite(ns) =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
    , "extend-rewrite"
    , "110"
    , "3"
    , "110"
    , "34"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "110"
      , "24"
      , "110"
      , "34"
      )
    ; rewrite(
        s-step(
        | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
        , "110"
        , "32"
        , "110"
        , "33"
        )
        ; ns
      )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-rewrite"
      , "110"
      , "3"
      , "110"
      , "34"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/collection/hash-table/scoped-finite-map.str"
      , "extend-rewrite"
      , "110"
      , "3"
      , "110"
      , "34"
      )
      ; fail