module system/error

imports
  org.strategoxt.imp.debuggers.stratego.runtime


signature
  constructors
    ErrorNumber : Int -> Error


strategies
  get-last-error =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/system/error.str"
    , "get-last-error"
    , "19"
    , "2"
    , "20"
    , "28"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "20"
      , "4"
      , "20"
      , "28"
      )
    ; !ErrorNumber(
         <s-step(
          | "strategoxt/stratego-libraries/lib/spec/system/error.str"
          , "20"
          , "18"
          , "20"
          , "26"
          )
          ; get-errno>
       )
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "get-last-error"
      , "19"
      , "2"
      , "20"
      , "28"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "get-last-error"
      , "19"
      , "2"
      , "20"
      , "28"
      )
      ; fail

  get-errno =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/system/error.str"
    , "get-errno"
    , "27"
    , "2"
    , "28"
    , "24"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "28"
      , "4"
      , "28"
      , "24"
      )
    ; prim("SSL_get_errno")
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "get-errno"
      , "27"
      , "2"
      , "28"
      , "24"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "get-errno"
      , "27"
      , "2"
      , "28"
      , "24"
      )
      ; fail

  perror =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/system/error.str"
    , "perror"
    , "37"
    , "2"
    , "38"
    , "28"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "38"
      , "4"
      , "38"
      , "28"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/system/error.str"
       , "38"
       , "4"
       , "38"
       , "5"
       )
       ; ?s)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "38"
      , "8"
      , "38"
      , "28"
      )
    ; prim("SSL_perror", s)
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "perror"
      , "37"
      , "2"
      , "38"
      , "28"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "perror"
      , "37"
      , "2"
      , "38"
      , "28"
      )
      ; fail

  strerror =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/system/error.str"
    , "strerror"
    , "47"
    , "2"
    , "48"
    , "30"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "48"
      , "4"
      , "48"
      , "30"
      )
    ; (s-step(
       | "strategoxt/stratego-libraries/lib/spec/system/error.str"
       , "48"
       , "4"
       , "48"
       , "5"
       )
       ; ?s)
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "48"
      , "8"
      , "48"
      , "30"
      )
    ; prim("SSL_strerror", s)
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "strerror"
      , "47"
      , "2"
      , "48"
      , "30"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "strerror"
      , "47"
      , "2"
      , "48"
      , "30"
      )
      ; fail


strategies
  EXDEV =
    s-enter(
    | "strategoxt/stratego-libraries/lib/spec/system/error.str"
    , "EXDEV"
    , "52"
    , "2"
    , "52"
    , "26"
    )
    ; s-step(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "52"
      , "10"
      , "52"
      , "26"
      )
    ; prim("SSL_EXDEV")
    < s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "EXDEV"
      , "52"
      , "2"
      , "52"
      , "26"
      )
    + s-exit(
      | "strategoxt/stratego-libraries/lib/spec/system/error.str"
      , "EXDEV"
      , "52"
      , "2"
      , "52"
      , "26"
      )
      ; fail