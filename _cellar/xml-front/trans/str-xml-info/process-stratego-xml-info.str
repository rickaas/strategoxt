module process-stratego-xml-info

imports
  org.strategoxt.imp.debuggers.stratego.runtime


imports
  xml-doc2xml-info
  Stratego
  stratego-meta-markers


strategies
  main-process-stratego-xml-info =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "main-process-stratego-xml-info", "6,2,7,33")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "7,4,7,33")
    ; io-wrap(
        s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "7,12,7,32") ; stratego-xml2xml-info
      )
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "main-process-stratego-xml-info", "6,2,7,33")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "main-process-stratego-xml-info", "6,2,7,33")
      ; fail


strategies
  stratego-xml2xml-info =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "stratego-xml2xml-info", "16,2,18,34")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "17,6,18,34")
    ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "17,6,17,27") ; xml-fragments2xml-info)
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "18,6,18,34")
    ; stratego-xml-apply-namespaces
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "stratego-xml2xml-info", "16,2,18,34")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "stratego-xml2xml-info", "16,2,18,34")
      ; fail

  xml-fragments2xml-info =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-fragments2xml-info", "20,2,26,4")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "21,4,26,4")
    ; rec x (
        s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "22,6,25,6")
        ; alltd(
            s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "23,8,24,44")
            ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "23,8,23,43")
               ; all-quotation(
                   s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "23,22,23,42") ; xml-fragment2xml-info
                 )
               + s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "24,8,24,44")
                 ; Module(
                     s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "24,15,24,16") ; id
                   , s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "24,19,24,40")
                     ; map(
                         s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "24,23,24,39") ; rewrite-Attribute
                       )
                   , s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "24,43,24,43") ; x
                   ))
          )
      )
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-fragments2xml-info", "20,2,26,4")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-fragments2xml-info", "20,2,26,4")
      ; fail

  xml-fragment2xml-info =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-fragment2xml-info", "34,2,44,6")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "35,6,44,6")
    ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "35,9,35,50")
       ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "35,9,35,26")
          ; ?Document(_, _, _)
          < s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "35,30,35,45") ; rewrite-Document
          + s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "35,49,35,50") ; id))
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "36,6,44,6")
    ; topdownS(
        s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "37,8,42,8")
        ; try(
            s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "38,10,41,21")
            ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "38,10,38,24") ; rewrite-Element
               + s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "39,10,41,21")
                 ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "39,10,39,26") ; rewrite-Attribute
                    + s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "40,10,41,21")
                      ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "40,10,40,21") ; rewrite-Text
                         + s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "41,10,41,21") ; rewrite-Conc)))
          )
      , s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "43,8,43,31") ; is-anti-quotation-helper
      )
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-fragment2xml-info", "34,2,44,6")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-fragment2xml-info", "34,2,44,6")
      ; fail

  is-anti-quotation-helper(s) =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "is-anti-quotation-helper", "46,2,48,27")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "47,4,48,27")
    ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "47,4,47,20") ; is-anti-quotation)
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "48,6,48,27")
    ; xml-fragments2xml-info
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "is-anti-quotation-helper", "46,2,48,27")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "is-anti-quotation-helper", "46,2,48,27")
      ; fail

  rewrite-Conc :
    Conc(l1, l2) -> <r-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "rewrite-Conc", "50,2,51,101")> FromApp(
                                                                                                                                     BA(
                                                                                                                                       CallNoArgs(SVar("conc"))
                                                                                                                                     , NoAnnoList(
                                                                                                                                         Tuple(
                                                                                                                                           [ToTerm(l1), ToTerm(l2)]
                                                                                                                                         )
                                                                                                                                       )
                                                                                                                                     )
                                                                                                                                   )
    where r-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "rewrite-Conc", "50,2,51,101")
          <+ r-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "rewrite-Conc", "50,2,51,101")
             ; fail

  stratego-xml-apply-namespaces =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "stratego-xml-apply-namespaces", "58,2,69,6")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "59,4,69,6")
    ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "59,4,61,4")
       ; rules (
           DefaultNamespace :
             () -> None()
           ResolvePrefix :
             "xml" -> "http://www.w3.org/XML/1998/namespace"
         ))
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "62,6,69,6")
    ; rec x (
        s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "63,6,68,7")
        ; {|ResolvePrefix, DefaultNamespace:
             s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "64,10,67,17")
             ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "64,10,64,26")
                ; ?Element(_, _, _)
                < s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "65,10,65,40")
                  ; xml-apply-namespaces-element(
                      s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "65,39,65,39") ; x
                    )
                + s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "66,10,67,17")
                  ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "66,10,66,40")
                     ; try(
                         s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "66,14,66,39") ; remove-stratego-xmlns-decl
                       ))
                  ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "67,12,67,17")
                  ; all(s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "67,16,67,16") ; x))
          |}
      )
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "stratego-xml-apply-namespaces", "58,2,69,6")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "stratego-xml-apply-namespaces", "58,2,69,6")
      ; fail

  remove-stratego-xmlns-decl :
    Module(name, xmlatts, decls) -> <r-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "remove-stratego-xmlns-decl", "75,2,77,44")> Module(name, decls)
    where r-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "remove-stratego-xmlns-decl", "75,2,77,44")
          <+ r-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "remove-stratego-xmlns-decl", "75,2,77,44")
             ; fail
    where s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "77,12,77,44")
          ; <(s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "77,13,77,35") ; collect-namespace-decls)> xmlatts
          <+ r-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "remove-stratego-xmlns-decl", "75,2,77,44")
             ; fail


strategies
  is-xml-content =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "is-xml-content", "81,2,82,20")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "82,4,82,20")
    ; is-anti-quotation
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "is-xml-content", "81,2,82,20")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "is-xml-content", "81,2,82,20")
      ; fail

  xml-attr-value2string =
    s-enter(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-attr-value2string", "89,2,90,31")
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "90,4,90,31")
    ; (s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "90,4,90,27")
       ; where(s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "90,10,90,26") ; is-anti-quotation))
    ; s-step(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "90,30,90,31")
    ; id
    < s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-attr-value2string", "89,2,90,31")
    + s-exit(|"_cellar/xml-front/trans/str-xml-info/process-stratego-xml-info.str", "xml-attr-value2string", "89,2,90,31")
      ; fail


signature
  constructors
    Module : StrategoModuleName * XmlAttributes * List(StrategDecl) -> StrategoModule